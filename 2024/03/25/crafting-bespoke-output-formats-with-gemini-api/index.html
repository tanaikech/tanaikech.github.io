<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  
  <meta name="google-site-verification" content="1BvDMY90ui0jRLHkrpqdQ_x62h5VNEMuK6mQsDvVQH0" />

  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.98.0" />

  <title>Crafting Bespoke Output Formats with Gemini API &middot; tanaike</title>

    

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://tanaikech.github.io/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://tanaikech.github.io/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="https://tanaikech.github.io/css/blackburn.css">

  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">

  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet" type="text/css">

  
  <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

 
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/styles/androidstudio.min.css">
  <script async src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/highlight.min.js"></script>
  
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="https://tanaikech.github.io/img/favicon.ico" type="image/x-icon" />

  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  
  <a class="pure-menu-heading brand" href="https://tanaikech.github.io/">TANAIKE</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/about/"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/topics/"><i class='fa fa-folder fa-fw'></i>Topics</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/tags/"><i class='fa fa-tags fa-fw'></i>Tags</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/contact/"><i class='fa fa-phone fa-fw'></i>Contact</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/link/"><i class='fa fa-thumbs-up fa-fw'></i>Links</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/webapps/"><i class='fas fa-toolbox'></i>Web Applications</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/donate/"><i class='fas fa-donate'></i>Donate</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/tanaikech" rel="me" target="_blank"><i class="fab fa-twitter-square fa-fw"></i>X</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/tanaikech" rel="me" target="_blank"><i class="fab fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://stackoverflow.com/users/7108653" rel="me" target="_blank"><i class="fab fa-stack-overflow fa-fw"></i>Stack Overflow</a>
    </li>
    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2017. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>Crafting Bespoke Output Formats with Gemini API</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>25 Mar 2024, 10:54</time>
  </div>

  

  
  
  
  <div>
    <i class="fa fa-folder fa-fw"></i>
    
      <a class="post-taxonomy-topic" href="https://tanaikech.github.io/topics/pythontips">PythonTips</a>
    
  </div>
  
  

  
  
  
  <div>
    <i class="fa fa-tags fa-fw"></i>
    
      <a class="post-taxonomy-tag" href="https://tanaikech.github.io/tags/python">python</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://tanaikech.github.io/tags/gemini">Gemini</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://tanaikech.github.io/tags/ai">AI</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://tanaikech.github.io/tags/llm">LLM</a>
    
  </div>
  
  

</div>

  <p><a href="https://gist.github.com/tanaikech/3a659a87673e3e582c880934c8f19e01">Gists</a></p>
<p><img src="https://tanaikech.github.io/image-storage/20240325a/fig1.png" alt=""></p>
<h1 id="abstract">Abstract</h1>
<p>The Gemini API unlocks potential for diverse applications but requires consistent output formatting. This report proposes a method using question phrasing and API calls to craft a bespoke output, enabling seamless integration with user applications. Examples include data categorization and obtaining multiple response options.</p>
<h1 id="introduction">Introduction</h1>
<p>With the release of the LLM model Gemini as an API on Vertex AI and Google AI Studio, a world of possibilities has opened up. <a href="https://deepmind.google/technologies/gemini/#introduction">Ref</a> The Gemini API significantly expands the potential of various scripting languages and paves the way for diverse applications. However, leveraging the Gemini API smoothly requires consistent output formatting, which can be tricky due to its dependence on the specific question asked.</p>
<p>To address this challenge, this report explores a method for achieving consistent output formatting. The findings indicate that output formats can be controlled by:</p>
<p>The question itself: By carefully crafting the question, users can influence the structure and presentation of the response.
Function calls: Specific function calls within the API provide additional control over the formatting of the output. About the function call, <a href="https://medium.com/google-cloud/guide-to-function-calling-with-gemini-and-google-apps-script-0e058d472f45">my report</a> might be useful for understanding it.</p>
<p>This report introduces the following 2 applications using this method.</p>
<ol>
<li>Categorizing data.</li>
<li>Obtaining multiple identified responses.</li>
</ol>
<p>By strategically combining question phrasing and function calls, users can obtain outputs that seamlessly integrate into their applications.</p>
<h1 id="preparation">Preparation</h1>
<p>In order to test the following scripts, please create an API key. Please access <a href="https://makersuite.google.com/app/apikey">https://makersuite.google.com/app/apikey</a> and create your API key. At that time, please enable Generative Language API at the API console. This API key is used for this sample script. This official document can be also seen. <a href="https://ai.google.dev/">Ref</a>.</p>
<p>The following scripts are Python scripts. So, please install <a href="https://github.com/google/generative-ai-python">Google AI Python SDK</a> and <a href="https://github.com/googleapis/google-cloud-python/tree/main/packages/google-ai-generativelanguage">Python Client for Generative Language API</a>.</p>
<h1 id="1-categorization">1. Categorization</h1>
<p>In this section, we introduce sample scripts for the first application of controlling output formats: categorizing words with the Gemini API. The script takes words and categorizes them according to the corresponding values in categories. This categorization can be applied to various situations, such as flexible labeling of emails, and management of documents, images, and videos. It is worth noting that this application has significant potential.</p>
<h2 id="11-by-only-question">1.1 By only question</h2>
<p>In this sample, the output format is controlled by the provided question. This is the fundamental approach. The question is <code>Select the related category of '{word}' from the following categories of {c}. Return the selected category as a word with the lowercase letter.</code>. Each word is used in a loop.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> google.generativeai <span style="color:#66d9ef">as</span> genai
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> google.ai.generativelanguage <span style="color:#66d9ef">as</span> glm
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Please set your API key</span>
</span></span><span style="display:flex;"><span>apiKey <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;###&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Please set words you want to categorize.</span>
</span></span><span style="display:flex;"><span>words <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;apple&#34;</span>, <span style="color:#e6db74">&#34;sushi&#34;</span>, <span style="color:#e6db74">&#34;orange&#34;</span>, <span style="color:#e6db74">&#34;spinach&#34;</span>, <span style="color:#e6db74">&#34;toyota lexus&#34;</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Please set your categories.</span>
</span></span><span style="display:flex;"><span>categories <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;fruit&#34;</span>, <span style="color:#e6db74">&#34;vegetable&#34;</span>, <span style="color:#e6db74">&#34;vehicle&#34;</span>, <span style="color:#e6db74">&#34;human&#34;</span>, <span style="color:#e6db74">&#34;animal&#34;</span>, <span style="color:#e6db74">&#34;other&#34;</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>genai<span style="color:#f92672">.</span>configure(api_key<span style="color:#f92672">=</span>apiKey)
</span></span><span style="display:flex;"><span>model <span style="color:#f92672">=</span> genai<span style="color:#f92672">.</span>GenerativeModel(<span style="color:#e6db74">&#34;gemini-pro&#34;</span>)
</span></span><span style="display:flex;"><span>c <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;, &#34;</span><span style="color:#f92672">.</span>join(categories)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> word <span style="color:#f92672">in</span> words:
</span></span><span style="display:flex;"><span>    question <span style="color:#f92672">=</span> <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Select the related category of &#39;</span><span style="color:#e6db74">{</span>word<span style="color:#e6db74">}</span><span style="color:#e6db74">&#39; from the following categories of </span><span style="color:#e6db74">{</span>c<span style="color:#e6db74">}</span><span style="color:#e6db74">. Return the selected category as a word with lowercase letter.&#34;</span>
</span></span><span style="display:flex;"><span>    response <span style="color:#f92672">=</span> model<span style="color:#f92672">.</span>generate_content(question)
</span></span><span style="display:flex;"><span>    res <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Return no value.&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> response<span style="color:#f92672">.</span>candidates[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>content:
</span></span><span style="display:flex;"><span>        res <span style="color:#f92672">=</span> response<span style="color:#f92672">.</span>candidates[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>content<span style="color:#f92672">.</span>parts[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>text
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>word<span style="color:#e6db74">}</span><span style="color:#e6db74"> ---&gt; </span><span style="color:#e6db74">{</span>res<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span></code></pre></div><p>When this script is run, the following result is obtained. In this case, only a word of the selected category is correctly returned.</p>
<pre tabindex="0"><code>apple ---&gt; fruit
sushi ---&gt; other
orange ---&gt; fruit
spinach ---&gt; vegetable
toyota lexus ---&gt; vehicle
</code></pre><p>When I tested this script, there was a case that multiple categories were returned in a single word.</p>
<h2 id="12-by-function-calling">1.2 By function calling</h2>
<p>In this sample, the output format is controlled by the question and the function calling. This is the new approach. The question is simple like <code>Select the category of {word}.</code>. In this case, each category has a description. When this script is run, Gemini API selects one of the functions. The function name is the category name. When the function is selected with Gemini API, the category can be obtained by the function name. When Gemini API selects the function, the function name is always in constant format. This situation is used. Each word is used in a loop.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> google.generativeai <span style="color:#66d9ef">as</span> genai
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> google.ai.generativelanguage <span style="color:#66d9ef">as</span> glm
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Please set your API key</span>
</span></span><span style="display:flex;"><span>apiKey <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;###&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Please set words you want to categorize.</span>
</span></span><span style="display:flex;"><span>words <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;apple&#34;</span>, <span style="color:#e6db74">&#34;sushi&#34;</span>, <span style="color:#e6db74">&#34;orange&#34;</span>, <span style="color:#e6db74">&#34;spinach&#34;</span>, <span style="color:#e6db74">&#34;toyota lexus&#34;</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Please set your categories including the descriptions.</span>
</span></span><span style="display:flex;"><span>categories <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;category&#34;</span>: <span style="color:#e6db74">&#34;fruit&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;Sweet or savory, nature&#39;s lure for animals: packages hiding plant babies for a tasty journey, spreading life with every bite.&#34;</span>,
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;category&#34;</span>: <span style="color:#e6db74">&#34;vegetable&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;Plant&#39;s colorful bounty, not sweet treats, but packed with vitamins. Below ground or bursting bright, they fuel growth and meals, not the seeds themselves, but vital for their survival. &#34;</span>,
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;category&#34;</span>: <span style="color:#e6db74">&#34;vehicle&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;Wheeled contraption, powered beast, or sky serpent - carries people and things across land, water, or air. Used for travel, transport, even exploration. Makes journeys faster, farther, sometimes even fun!&#34;</span>,
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;category&#34;</span>: <span style="color:#e6db74">&#34;human&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;Two-legged tool builders, masters of complex languages, driven by emotions and stories. They reshape landscapes, explore vast unknowns, and yearn for meaning amidst fleeting lives.&#34;</span>,
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;category&#34;</span>: <span style="color:#e6db74">&#34;animal&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;Living, breathing machines with diverse shapes and sizes. They move, eat, grow, and reproduce, driven by instincts and senses. From soaring flyers to slithering dwellers, they weave an intricate web of life, shaping ecosystems and captivating imaginations.&#34;</span>,
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;category&#34;</span>: <span style="color:#e6db74">&#34;other&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;Except for fruit, vegetable, vehicle, human, and animal&#34;</span>,
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>function_declarations <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>    glm<span style="color:#f92672">.</span>FunctionDeclaration(name<span style="color:#f92672">=</span>e[<span style="color:#e6db74">&#34;category&#34;</span>], description<span style="color:#f92672">=</span>e[<span style="color:#e6db74">&#34;description&#34;</span>])
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> e <span style="color:#f92672">in</span> categories
</span></span><span style="display:flex;"><span>]
</span></span><span style="display:flex;"><span>genai<span style="color:#f92672">.</span>configure(api_key<span style="color:#f92672">=</span>apiKey)
</span></span><span style="display:flex;"><span>tool <span style="color:#f92672">=</span> glm<span style="color:#f92672">.</span>Tool(function_declarations<span style="color:#f92672">=</span>function_declarations)
</span></span><span style="display:flex;"><span>model <span style="color:#f92672">=</span> genai<span style="color:#f92672">.</span>GenerativeModel(<span style="color:#e6db74">&#34;gemini-pro&#34;</span>, tools<span style="color:#f92672">=</span>[tool])
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> word <span style="color:#f92672">in</span> words:
</span></span><span style="display:flex;"><span>    question <span style="color:#f92672">=</span> <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Select the category of </span><span style="color:#e6db74">{</span>word<span style="color:#e6db74">}</span><span style="color:#e6db74">.&#34;</span>
</span></span><span style="display:flex;"><span>    response <span style="color:#f92672">=</span> model<span style="color:#f92672">.</span>generate_content(question)
</span></span><span style="display:flex;"><span>    print(response<span style="color:#f92672">.</span>candidates[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>content<span style="color:#f92672">.</span>parts[<span style="color:#ae81ff">0</span>])
</span></span><span style="display:flex;"><span>    res <span style="color:#f92672">=</span> response<span style="color:#f92672">.</span>candidates[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>content<span style="color:#f92672">.</span>parts[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>function_call<span style="color:#f92672">.</span>name
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>word<span style="color:#e6db74">}</span><span style="color:#e6db74"> ---&gt; </span><span style="color:#e6db74">{</span>res<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span></code></pre></div><p>When this script is run, the following result is obtained. In this case, only a word of the selected category is correctly returned.</p>
<pre tabindex="0"><code>apple ---&gt; fruit
sushi ---&gt; other
orange ---&gt; fruit
spinach ---&gt; vegetable
toyota lexus ---&gt; vehicle
</code></pre><p>When I tested this script, there was a case that the selected category of <code>sushi</code> was wrong. It is considered that the explanation of <code>other</code> might be required to be modified.</p>
<h1 id="2-multiple-responses">2. Multiple responses</h1>
<p>This section showcases the second application for controlling output formats: obtaining multiple identified responses with the Gemini API. We provide sample scripts using multiple sample words as input, retrieving their descriptions. Notably, this method allows retrieving multiple identified responses per API call, significantly reducing process costs. This efficiency makes it a valuable tool for various applications.</p>
<h2 id="21-by-only-question">2.1 By only question</h2>
<p>In this sample, the output format is controlled by the given question. This is the fundamental approach. The question is <code>Explain the following words within 50 words for each word. Return them as a JSON object that the key and the value are the word and the explanation, respectively.</code>. All words are used in one API call. In this case, multiple responses are possible. In order to control the output format, it uses <code>Return them as a JSON object that the key and the value are the word and the explanation, respectively.</code>. By this, multiple identified responses can be obtained.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> google.generativeai <span style="color:#66d9ef">as</span> genai
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> json
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Please set your API key</span>
</span></span><span style="display:flex;"><span>apiKey <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;###&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Please set words you want to explain.</span>
</span></span><span style="display:flex;"><span>words <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;fruit&#34;</span>, <span style="color:#e6db74">&#34;vegetable&#34;</span>, <span style="color:#e6db74">&#34;vehicle&#34;</span>, <span style="color:#e6db74">&#34;human&#34;</span>, <span style="color:#e6db74">&#34;animal&#34;</span>, <span style="color:#e6db74">&#34;other&#34;</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>question <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Explain the following words within 50 words for each word. Return them as a JSON object that the key and the value are the word and the explanation, respectively.&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>c <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;, &#34;</span><span style="color:#f92672">.</span>join(words)
</span></span><span style="display:flex;"><span>genai<span style="color:#f92672">.</span>configure(api_key<span style="color:#f92672">=</span>apiKey)
</span></span><span style="display:flex;"><span>model <span style="color:#f92672">=</span> genai<span style="color:#f92672">.</span>GenerativeModel(<span style="color:#e6db74">&#34;gemini-pro&#34;</span>)
</span></span><span style="display:flex;"><span>response <span style="color:#f92672">=</span> model<span style="color:#f92672">.</span>generate_content(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>question<span style="color:#e6db74">}</span><span style="color:#e6db74"> </span><span style="color:#e6db74">{</span>c<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>obj <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>loads(re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">&#34;{[\w\s\S]*}&#34;</span>, response<span style="color:#f92672">.</span>candidates[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>content<span style="color:#f92672">.</span>parts[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>text)[<span style="color:#ae81ff">0</span>])
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> word <span style="color:#f92672">in</span> words:
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>word<span style="color:#e6db74">}</span><span style="color:#e6db74"> ---&gt; </span><span style="color:#e6db74">{</span>obj<span style="color:#f92672">.</span>get(word, <span style="color:#e6db74">&#39;&#39;</span>)<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span></code></pre></div><p>When this script is run, the value of <code>response.candidates[0].content.parts[0].text</code> is as follows. The JSON data is returned as the markdown format.</p>
<pre tabindex="0"><code>{
  &#34;fruit&#34;: &#34;A sweet and fleshy part of a plant that contains seeds.&#34;,
  &#34;vegetable&#34;: &#34;A plant or part of a plant that is used as food, typically as part of a meal.&#34;,
  &#34;vehicle&#34;: &#34;A machine that is used to transport people or goods.&#34;,
  &#34;human&#34;: &#34;A member of the species Homo sapiens, characterized by intelligence, culture, and the ability to walk upright.&#34;,
  &#34;animal&#34;: &#34;A multicellular organism that typically has a nervous system, an internal skeleton, and the ability to move about.&#34;,
  &#34;other&#34;: &#34;Anything that is not included in the previous categories.&#34;
}
</code></pre><p>When this JSON data is parsed, the following result is obtained.</p>
<pre tabindex="0"><code>fruit ---&gt; A sweet and fleshy part of a plant that contains seeds.
vegetable ---&gt; A plant or part of a plant that is used as food, typically as part of a meal.
vehicle ---&gt; A machine that is used to transport people or goods.
human ---&gt; A member of the species Homo sapiens, characterized by intelligence, culture, and the ability to walk upright.
animal ---&gt; A multicellular organism that typically has a nervous system, an internal skeleton, and the ability to move about.
other ---&gt; Anything that is not included in the previous categories.
</code></pre><h2 id="22-by-function-calling">2.2 By function calling</h2>
<p>In this sample, the output format is controlled by the question and the function calling. This is the new approach. The question is simple like <code>Explain the following words within 50 words for each word. Return them as an object using function calling.</code>. In this case, the properties with the keys of <code>words</code> and the description of <code>Explanation of {w} within 50 words.</code> are created in a function. When this script is run, Gemini API puts the created descriptions of each word into each value of the properties. And, the created descriptions can be obtained as the argument of the function of the response. All words are used in one API call. In this case, multiple responses are possible.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> google.generativeai <span style="color:#66d9ef">as</span> genai
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> google.ai.generativelanguage <span style="color:#66d9ef">as</span> glm
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Please set your API key</span>
</span></span><span style="display:flex;"><span>apiKey <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;###&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Please set words you want to explain.</span>
</span></span><span style="display:flex;"><span>words <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;fruit&#34;</span>, <span style="color:#e6db74">&#34;vegetable&#34;</span>, <span style="color:#e6db74">&#34;vehicle&#34;</span>, <span style="color:#e6db74">&#34;human&#34;</span>, <span style="color:#e6db74">&#34;animal&#34;</span>, <span style="color:#e6db74">&#34;other&#34;</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>question <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Explain the following words within 50 words for each word. Return them as an object using function calling.&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>genai<span style="color:#f92672">.</span>configure(api_key<span style="color:#f92672">=</span>apiKey)
</span></span><span style="display:flex;"><span>tool <span style="color:#f92672">=</span> glm<span style="color:#f92672">.</span>Tool(
</span></span><span style="display:flex;"><span>    function_declarations<span style="color:#f92672">=</span>[
</span></span><span style="display:flex;"><span>        glm<span style="color:#f92672">.</span>FunctionDeclaration(
</span></span><span style="display:flex;"><span>            name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;results&#34;</span>,
</span></span><span style="display:flex;"><span>            description<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Put all answers in each property in an object.&#34;</span>,
</span></span><span style="display:flex;"><span>            parameters<span style="color:#f92672">=</span>glm<span style="color:#f92672">.</span>Schema(
</span></span><span style="display:flex;"><span>                type<span style="color:#f92672">=</span>glm<span style="color:#f92672">.</span>Type<span style="color:#f92672">.</span>OBJECT,
</span></span><span style="display:flex;"><span>                properties<span style="color:#f92672">=</span>{w: glm<span style="color:#f92672">.</span>Schema(type<span style="color:#f92672">=</span>glm<span style="color:#f92672">.</span>Type<span style="color:#f92672">.</span>STRING, description<span style="color:#f92672">=</span><span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Explanation of </span><span style="color:#e6db74">{</span>w<span style="color:#e6db74">}</span><span style="color:#e6db74"> within 50 words.&#34;</span>) <span style="color:#66d9ef">for</span> w <span style="color:#f92672">in</span> words},
</span></span><span style="display:flex;"><span>                required<span style="color:#f92672">=</span>words,
</span></span><span style="display:flex;"><span>            ),
</span></span><span style="display:flex;"><span>        )
</span></span><span style="display:flex;"><span>    ]
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>model <span style="color:#f92672">=</span> genai<span style="color:#f92672">.</span>GenerativeModel(<span style="color:#e6db74">&#34;gemini-pro&#34;</span>, tools<span style="color:#f92672">=</span>[tool])
</span></span><span style="display:flex;"><span>messages <span style="color:#f92672">=</span> [{<span style="color:#e6db74">&#34;role&#34;</span>: <span style="color:#e6db74">&#34;user&#34;</span>, <span style="color:#e6db74">&#34;parts&#34;</span>: [question, <span style="color:#f92672">*</span>words]}]
</span></span><span style="display:flex;"><span>response <span style="color:#f92672">=</span> model<span style="color:#f92672">.</span>generate_content(messages)
</span></span><span style="display:flex;"><span>obj <span style="color:#f92672">=</span> response<span style="color:#f92672">.</span>candidates[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>content<span style="color:#f92672">.</span>parts[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>function_call<span style="color:#f92672">.</span>args
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> w <span style="color:#f92672">in</span> words:
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>w<span style="color:#e6db74">}</span><span style="color:#e6db74"> ---&gt; </span><span style="color:#e6db74">{</span>obj[w]<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span></code></pre></div><p>When this script is run, the following result is obtained.</p>
<pre tabindex="0"><code>fruit ---&gt; Fruit is a sweet and fleshy part of a plant that is used as food.
vegetable ---&gt; Vegetable is an edible plant or plant part.
vehicle ---&gt; Vehicle is a machine that is used to transport people or goods.
human ---&gt; Human is a member of the species Homo sapiens, a highly intelligent, social primate.
animal ---&gt; Animal is a multicellular organism that is able to move, breathe, reproduce, and sense its environment.
other ---&gt; Other is something that is different or unique from the rest.
</code></pre><p>When a single API call retrieves multiple answers, it significantly reduces processing costs. Compared to the approach of iterating through words individually, our proposed methods demonstrate an estimated 80 % reduction in processing cost.</p>
<p>In this sample, the texts are used. Of course, this method can be used for creating the descriptions for images with low process cost. It is considered that this will be useful for a lot of users. However, as an important point, in the current stage, the function calling cannot be used to <code>models/gemini-pro-vision</code>. When the function calling is tried to be used to <code>models/gemini-pro-vision</code>, an error like <code>Function calling is not enabled for models/gemini-pro-vision</code> occurs. From this situation, it introduces the sample script using the section &ldquo;2.1 By only question&rdquo;.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> google.generativeai <span style="color:#66d9ef">as</span> genai
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> re
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> json
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> glob
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> os
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> PIL <span style="color:#f92672">import</span> Image
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Please set your API key</span>
</span></span><span style="display:flex;"><span>apiKey <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;###&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Prepare images.</span>
</span></span><span style="display:flex;"><span>image_dir <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;###&#34;</span> <span style="color:#75715e"># Please set the path of a directory including the image files.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>images_list <span style="color:#f92672">=</span> glob<span style="color:#f92672">.</span>glob(os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(image_dir, <span style="color:#e6db74">&#34;*.jpg&#34;</span>))
</span></span><span style="display:flex;"><span>obj <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> p <span style="color:#f92672">in</span> images_list:
</span></span><span style="display:flex;"><span>    obj<span style="color:#f92672">.</span>append({<span style="color:#e6db74">&#34;filename&#34;</span>: os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>split(p)[<span style="color:#ae81ff">1</span>], <span style="color:#e6db74">&#34;image&#34;</span>: Image<span style="color:#f92672">.</span>open(p)})
</span></span><span style="display:flex;"><span>obj <span style="color:#f92672">=</span> sorted(obj, key<span style="color:#f92672">=</span><span style="color:#66d9ef">lambda</span> x: x[<span style="color:#e6db74">&#34;filename&#34;</span>])
</span></span><span style="display:flex;"><span>images <span style="color:#f92672">=</span> [o[<span style="color:#e6db74">&#34;image&#34;</span>] <span style="color:#66d9ef">for</span> o <span style="color:#f92672">in</span> obj]
</span></span><span style="display:flex;"><span>keys <span style="color:#f92672">=</span> [o[<span style="color:#e6db74">&#34;filename&#34;</span>] <span style="color:#66d9ef">for</span> o <span style="color:#f92672">in</span> obj]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>filenames <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;,&#34;</span><span style="color:#f92672">.</span>join(keys)
</span></span><span style="display:flex;"><span>question <span style="color:#f92672">=</span> <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Explain the images of </span><span style="color:#e6db74">{</span>filenames<span style="color:#e6db74">}</span><span style="color:#e6db74"> within 50 words for each image. Images of </span><span style="color:#e6db74">{</span>filenames<span style="color:#e6db74">}</span><span style="color:#e6db74"> are following images in order. Return them as a JSON object that the key and the value are the filename and the explanation, respectively.&#34;</span>
</span></span><span style="display:flex;"><span>imagess <span style="color:#f92672">=</span> sum([[<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Next image is </span><span style="color:#e6db74">{</span>keys[i]<span style="color:#e6db74">}</span><span style="color:#e6db74">.&#34;</span>, e] <span style="color:#66d9ef">for</span> (i, e) <span style="color:#f92672">in</span> enumerate(images)], [])
</span></span><span style="display:flex;"><span>genai<span style="color:#f92672">.</span>configure(api_key<span style="color:#f92672">=</span>apiKey)
</span></span><span style="display:flex;"><span>model <span style="color:#f92672">=</span> genai<span style="color:#f92672">.</span>GenerativeModel(<span style="color:#e6db74">&#34;gemini-pro-vision&#34;</span>)
</span></span><span style="display:flex;"><span>response <span style="color:#f92672">=</span> model<span style="color:#f92672">.</span>generate_content([<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>question<span style="color:#e6db74">}</span><span style="color:#e6db74"> Order of filenames is </span><span style="color:#e6db74">{</span>filenames<span style="color:#e6db74">}</span><span style="color:#e6db74">.&#34;</span>, <span style="color:#f92672">*</span>imagess])
</span></span><span style="display:flex;"><span>print(response<span style="color:#f92672">.</span>candidates[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>content<span style="color:#f92672">.</span>parts[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>text)
</span></span><span style="display:flex;"><span>obj <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>loads(re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">&#34;{[\w\s\S]*}&#34;</span>, response<span style="color:#f92672">.</span>candidates[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>content<span style="color:#f92672">.</span>parts[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>text)[<span style="color:#ae81ff">0</span>])
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> word <span style="color:#f92672">in</span> keys:
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>word<span style="color:#e6db74">}</span><span style="color:#e6db74"> ---&gt; </span><span style="color:#e6db74">{</span>obj<span style="color:#f92672">.</span>get(word, <span style="color:#e6db74">&#39;&#39;</span>)<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span></code></pre></div><p>When the sample images are as follows (Those images are generated by Gemini. <a href="https://gemini.google.com/app)">https://gemini.google.com/app)</a>,</p>
<p><img src="https://tanaikech.github.io/image-storage/20240325a/fig2.png" alt=""></p>
<p>the following result is obtained.</p>
<pre tabindex="0"><code>image1.jpg ---&gt; A painting of three dogs running in the snow. There is one husky, one alaskan malamute, and one kleiner munsterlander.
image2.jpg ---&gt; A painting of four cats on a table.
image3.jpg ---&gt; A photograph of three vintage motorcycles parked on a grassy field.
image4.jpg ---&gt; A painting of two cats playing around two parked cars.
image5.jpg ---&gt; A photograph of two red apples and two oranges.
</code></pre><p>This result could be obtained by one API call. It is found that each description corresponds to each image. By this, the process cost can be reduced.</p>
<h1 id="summary">Summary</h1>
<p>This report demonstrates that controlling output formats within the Gemini API unlocks novel applications, as showcased in this document. Furthermore, these findings suggest that the Gemini API has the potential to significantly impact the industry and pave the way for innovative breakthroughs.</p>
<h1 id="note">Note</h1>
<ul>
<li>These sample scripts currently lack comprehensive error processing because of show simple samples. To ensure successful implementation in your specific environment, adding robust error-handling mechanisms is crucial.</li>
<li>The above illustration was created by <a href="https://gemini.google.com/">Gemini</a> with giving the abstract.</li>
</ul>

  
  <h4><i class="fas fa-share-alt" aria-hidden="true"></i>&nbsp;Share!</h4>
<ul class="share-buttons">
	<li><a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2ftanaikech.github.io%2f2024%2f03%2f25%2fcrafting-bespoke-output-formats-with-gemini-api%2f" target="_blank" title="Share on Facebook"><i class="fab fa-facebook" aria-hidden="true"></i><span class="sr-only">Share on Facebook</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="https://twitter.com/intent/tweet?source=https%3a%2f%2ftanaikech.github.io%2f2024%2f03%2f25%2fcrafting-bespoke-output-formats-with-gemini-api%2f" target="_blank" title="Tweet"><i class="fab fa-twitter" aria-hidden="true"></i><span class="sr-only">Tweet</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="https://plus.google.com/share?url=https%3a%2f%2ftanaikech.github.io%2f2024%2f03%2f25%2fcrafting-bespoke-output-formats-with-gemini-api%2f" target="_blank" title="Share on Google+"><i class="fab fa-google-plus" aria-hidden="true"></i><span class="sr-only">Share on Google+</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="http://www.tumblr.com/share?v=3&u=https%3a%2f%2ftanaikech.github.io%2f2024%2f03%2f25%2fcrafting-bespoke-output-formats-with-gemini-api%2f" target="_blank" title="Post to Tumblr"><i class="fab fa-tumblr" aria-hidden="true"></i><span class="sr-only">Post to Tumblr</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="http://pinterest.com/pin/create/button/?url=https%3a%2f%2ftanaikech.github.io%2f2024%2f03%2f25%2fcrafting-bespoke-output-formats-with-gemini-api%2f" target="_blank" title="Pin it"><i class="fab fa-pinterest-p" aria-hidden="true"></i><span class="sr-only">Pin it</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="http://www.reddit.com/submit?url=https%3a%2f%2ftanaikech.github.io%2f2024%2f03%2f25%2fcrafting-bespoke-output-formats-with-gemini-api%2f" target="_blank" title="Submit to Reddit"><i class="fab fa-reddit-alien" aria-hidden="true"></i><span class="sr-only">Submit to Reddit</span></a>
	</li>
</ul>


<style>
	ul.share-buttons{
	  list-style: none;
	  padding: 0;
	}

	ul.share-buttons li{
	  display: inline;
	}

	ul.share-buttons .sr-only{
	  position: absolute;
	  clip: rect(1px 1px 1px 1px);
	  clip: rect(1px, 1px, 1px, 1px);
	  padding: 0;
	  border: 0;
	  height: 1px;
	  width: 1px;
	  overflow: hidden;
	}
</style>


  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="https://tanaikech.github.io/2024/03/21/attempting-reverse-engineering-with-gemini-api-and-google-apps-script/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="https://tanaikech.github.io/2024/03/21/attempting-reverse-engineering-with-gemini-api-and-google-apps-script/">Attempting Reverse Engineering with Gemini API and Google Apps Script</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
    <nav class="next">
      <a href="https://tanaikech.github.io/2024/03/30/generating-texts-using-files-uploaded-by-gemini-1.5-api/">Generating Texts using Files Uploaded by Gemini 1.5 API</a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="https://tanaikech.github.io/2024/03/30/generating-texts-using-files-uploaded-by-gemini-1.5-api/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>


  
  
  
  

  

</div>

</div>
</div>
<script src="https://tanaikech.github.io/js/ui.js"></script>
<script src="https://tanaikech.github.io/js/menus.js"></script>






<script async src="https://www.googletagmanager.com/gtag/js?id=G-J3Z6T50WL5"></script>
<script>
  
  if (window.location.hostname != "localhost") {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-J3Z6T50WL5');
  }
</script>






<script src="https://tanaikech.github.io/js/math-code.js"></script>
  <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
  


</body>
</html>

