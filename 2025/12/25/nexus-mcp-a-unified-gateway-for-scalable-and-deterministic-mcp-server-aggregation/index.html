<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  
  <meta name="google-site-verification" content="1BvDMY90ui0jRLHkrpqdQ_x62h5VNEMuK6mQsDvVQH0" />

  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.98.0" />

  <title>Nexus-MCP: A Unified Gateway for Scalable and Deterministic MCP Server Aggregation &middot; tanaike</title>

    

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://tanaikech.github.io/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://tanaikech.github.io/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="https://tanaikech.github.io/css/blackburn.css">

  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.6.0/css/all.css">

  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet" type="text/css">

  
  <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

 
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/styles/androidstudio.min.css">
  <script async src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/highlight.min.js"></script>
  
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="https://tanaikech.github.io/img/favicon.ico" type="image/x-icon" />

  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  
  <a class="pure-menu-heading brand" href="https://tanaikech.github.io/">TANAIKE</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/about/"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/topics/"><i class='fa fa-folder fa-fw'></i>Topics</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/tags/"><i class='fa fa-tags fa-fw'></i>Tags</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/contact/"><i class='fa fa-phone fa-fw'></i>Contact</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/link/"><i class='fa fa-thumbs-up fa-fw'></i>Links</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/webapps/"><i class='fas fa-toolbox'></i>Web Applications</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/donate/"><i class='fas fa-donate'></i>Donate</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/tanaikech" rel="me" target="_blank"><i class="fa-brands fa-square-x-twitter"></i>X</a>
    </li>
    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://medium.com/@tanaike" rel="me" target="_blank"><i class="fa-brands fa-medium"></i>Medium</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://linkedin.com/in/tanaike" rel="me" target="_blank"><i class="fab fa-linkedin fa-fw"></i>LinkedIn</a>
    </li>
    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/tanaikech" rel="me" target="_blank"><i class="fa-brands fa-github"></i>GitHub</a>
    </li>
    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://gist.github.com/tanaikech" rel="me" target="_blank"><i class="fas fa-code fa-fw"></i>Gists</a>
    </li>
    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://stackoverflow.com/users/7108653" rel="me" target="_blank"><i class="fab fa-stack-overflow fa-fw"></i>Stack Overflow</a>
    </li>
    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://dev.to/tanaike" rel="me" target="_blank"><i class="fa-brands fa-dev fa-fw"></i>DEV</a>
    </li>
    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://zenn.dev/tanaike" rel="me" target="_blank"><i class="fas fa-edit fa-fw"></i>Zenn</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://devpost.com/kanshi000001" rel="me" target="_blank"><i class="fas fa-code fa-fw"></i>Devpost</a>
    </li>
    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2017. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>Nexus-MCP: A Unified Gateway for Scalable and Deterministic MCP Server Aggregation</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>25 Dec 2025, 15:24</time>
  </div>

  

  
  
  
  <div>
    <i class="fa fa-folder fa-fw"></i>
    
      <a class="post-taxonomy-topic" href="https://tanaikech.github.io/topics/nodetips">NodeTips</a>
    
  </div>
  
  

  
  
  
  <div>
    <i class="fa fa-tags fa-fw"></i>
    
      <a class="post-taxonomy-tag" href="https://tanaikech.github.io/tags/gemini">Gemini</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://tanaikech.github.io/tags/model-context-protocol">Model Context Protocol</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://tanaikech.github.io/tags/mcp">MCP</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://tanaikech.github.io/tags/antigravity">Antigravity</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://tanaikech.github.io/tags/node.js">Node.js</a>
    
  </div>
  
  

</div>

  <p><a href="https://gist.github.com/tanaikech/5fe73221c32a4e1c665b9c8a7f506d70">Gists</a></p>
<p><img src="https://tanaikech.github.io/image-storage/20251225a/fig1.jpg" alt=""></p>
<h1 id="abstract">Abstract</h1>
<p>Nexus-MCP resolves &ldquo;Tool Space Interference&rdquo; in Large Language Models by aggregating multiple MCP servers into a single gateway. Utilizing a strictly deterministic 4-phase workflow—Discovery, Mapping, Schema Verification, and Bridged Execution—it prevents context saturation and tool hallucinations, enabling the use of massive tool ecosystems without sacrificing reasoning accuracy.</p>
<h1 id="introduction">Introduction</h1>
<p>The integration of Gemini CLI and Google Antigravity with the Model Context Protocol (MCP) has significantly expanded the capabilities of LLM-based agents. However, this expansion introduces a critical performance bottleneck. As the number of available tools grows, Large Language Models (LLMs) suffer from a measurable decline in reasoning accuracy and tool-selection reliability.</p>
<p>Research identifies this phenomenon as &ldquo;Tool Space Interference (TSI).&rdquo; When an LLM&rsquo;s context window is saturated with excessive tool definitions, semantic overlap and irrelevant metadata distract the model <a href="https://www.microsoft.com/en-us/research/blog/tool-space-interference-in-the-mcp-era-designing-for-agent-compatibility-at-scale/">Ref</a>. Current technical guidelines suggest a &ldquo;soft limit&rdquo; of approximately 20 functions to maintain high accuracy. Exceeding this threshold often leads to increased hallucination rates and failures in executing complex instructions.</p>
<p>The standard MCP workflow operates by injecting all retrieved metadata (names, descriptions, JSON Schemas) directly into the context window. Nexus-MCP overcomes the scalability limits of this architecture by acting as an intelligent, unified gateway. Instead of exposing the entire toolset to the LLM—which triggers TSI—Nexus-MCP aggregates multiple MCP servers and employs a routing layer. This modular approach preserves model performance by minimizing noise and optimizing information density. The approach described in this article should be understood as one of several strategies for mitigating TSI.</p>
<h1 id="repository">Repository</h1>
<p><a href="https://github.com/tanaikech/nexus-mcp-extension">https://github.com/tanaikech/nexus-mcp-extension</a></p>
<h1 id="architecture-and-workflow">Architecture and Workflow</h1>
<p><img src="https://tanaikech.github.io/image-storage/20251225a/fig1c.jpg" alt=""></p>
<p><a href="https://mermaidchart.com/play?utm_source=mermaid_live_editor&amp;utm_medium=share#pako:eNp1VNuK2zAQ_ZVBsKWFeIlzjx9actmWhbKEZim0zj6o9iQWkSUjyWmyJv9e2bJzaXb9Iktz5syco0tBIhkjCchG0SyB5_lKgP3u7mCRUI3gBzBnOpI7VAcXWhqqzMewGl4-ged9hu9Mm2cpuQ5nlHPgduqZcg47RkHgPtdeGmUvjuCErnIfxQ6FkeoQzhRSg4B7GpnzMsg1LFHZ-kBFDGUiCJqitmz_9doJYMGpEExsXORMUlaaCMoPrxjWIyyUTDNTsdrfTFqGBTUGldAwgQ8wrftt8CXHT1RsfXjYWwnFXLpGIKUmSi6KVQr44cvR5V_kWA54kk53aitq9odj-AMzqQw8U729WL7V1w1gGSWY0jd5f6EzdIkcIzMJ3dhIgkmtpg5X0G9oHKHbtw0aj4ksN56uVr21VG4f69wT3nlBOYvtjrkla4dtoA7rPKskmQTBWFmlFXXTV0kXfiz_Muti3W3xqE-NT4HuKOPUWtI4eoW91T4NHQCMPLNcyZ9ey3-H9WanbnakF8DDHqPcMPmuvqa30uLy9Ib2oMgtQmTnlbtvXpIG7VITjLbLPIpQ6-JUEOqVdc7P_l5C33P3bWTT54TzuRRYTBRCeSq0wUxDZO8KR4PxuVQNvKjSNH0Tb7i_MsF0Es6k0NL5BAp1zo2urqELv5CWfY1YTAKjcmyRFFVKyykpSuIVsacqxRUJ7G9M1XZFVuJoczIqfkuZNmlK5puEBGvKtZ3lWVltzqh9584QFDGqmcyFIUF_6FccJCjIngR-b3zvj7rtUbs97vn-sD1okQMJOl3_fjTq9Qd-dzTotPu9wbFFXquy_r3ftdDBeNhvD8a9Tn98_AeR2cLF">Mermaid Chart Playground</a></p>
<p>Nexus-MCP operates as a meta-server, utilizing <code>StdioClientTransport</code> to manage dynamic connections to downstream servers defined in a JSON configuration. It exposes four specialized core tools that enforce a &ldquo;Defensive and Deterministic&rdquo; workflow:</p>
<p><strong>1. Aggregated Discovery (<code>list-tools</code>)</strong>
Unlike standard discovery, this tool aggregates inventories from all connected servers into a single formatted list. Crucially, it injects &ldquo;Search Hints&rdquo; directly into the output. These hints guide the LLM to identify non-obvious tools for complex tasks—such as finding &ldquo;PDF generation&rdquo; via MIME types or locating &ldquo;GAS&rdquo; (Google Apps Script) capabilities—without requiring the model to guess tool names.</p>
<p><strong>2. Server Introspection (<code>get-server-information</code>)</strong>
This tool provides high-level metadata about the connected ecosystem, allowing the agent to verify which server versions and tool sets are currently active before attempting any operations.</p>
<p><strong>3. Surgical Schema Retrieval (<code>get-input-schema-for-tools</code>)</strong>
To prevent context saturation, Nexus-MCP does not broadcast input schemas by default. Instead, the agent must explicitly request the schema for a specific <code>server_name</code> and <code>tool_name</code>. This asynchronous retrieval ensures that only relevant technical constraints are loaded into the LLM&rsquo;s context.</p>
<p><strong>4. Bridged Execution (<code>call-tool</code>)</strong>
Execution is strictly routed. The agent must provide the exact <code>server_name</code> and <code>tool_name</code> (validated against the discovery list). Nexus-MCP acts as a proxy, forwarding the request to the appropriate downstream server and returning the result to the agent.</p>
<h2 id="the-4-phase-algorithm">The 4-Phase Algorithm</h2>
<p>To eliminate hallucinations, the system instructions enforce the following loop:</p>
<ol>
<li><strong>Direct Discovery:</strong> Call <code>list-tools</code> to build a literal registry of valid <code>[SERVER_ID]</code> and <code>[TOOL_ID]</code> pairs.</li>
<li><strong>Literal Mapping:</strong> Analyze the prompt against the registry. If a requested capability is missing, the task is flagged as impossible immediately.</li>
<li><strong>Schema Verification:</strong> Retrieve schemas only for the selected tools to validate parameters.</li>
<li><strong>Bridged Execution:</strong> Execute the tools sequentially via the gateway.</li>
</ol>
<h1 id="prerequisites-and-installation">Prerequisites and Installation</h1>
<p>This guide uses <strong>Gemini CLI</strong> and <strong>Google Antigravity</strong> to demonstrate the capabilities of Nexus-MCP.</p>
<h2 id="1-environment-setup">1. Environment Setup</h2>
<p><strong>Install Gemini CLI</strong></p>
<p>First, install the <a href="https://github.com/google-gemini/gemini-cli">Gemini CLI</a> via npm:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npm install -g @google/gemini-cli
</span></span></code></pre></div><p>Authorize the CLI by following the instructions in the <a href="https://github.com/google-gemini/gemini-cli?tab=readme-ov-file#-authentication-options">official documentation</a>.</p>
<p><strong>Install Google Antigravity</strong></p>
<p>Please refer to the official release and installation guide at <a href="https://antigravity.google/">https://antigravity.google/</a>.</p>
<h2 id="2-install-nexus-mcp-extension">2. Install Nexus-MCP Extension</h2>
<p>Install the Nexus-MCP extension directly via the Gemini CLI:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gemini extensions install https://github.com/tanaikech/nexus-mcp-extension
</span></span></code></pre></div><h2 id="3-install-and-configure-sample-mcp-servers">3. Install and Configure Sample MCP Servers</h2>
<p>To demonstrate aggregation, we will install two specific extensions: <strong>Google Workspace</strong> and <strong>ToolsForMCPServer</strong>.</p>
<p><em>Important Note: We will install these extensions to download their source code and authenticate them. However, they must be disabled in the Gemini CLI after testing. This ensures that Nexus-MCP manages them exclusively, preventing duplicate tool definitions in the LLM context.</em></p>
<p><strong>A. Google Workspace Extension</strong></p>
<ol>
<li>Install the extension:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gemini extensions install https://github.com/gemini-cli-extensions/workspace
</span></span></code></pre></div><ol start="2">
<li>Launch the Gemini CLI to trigger the automatic authorization flow.</li>
<li>Run the following prompt in Gemini CLI to ensure it works:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>Get the current date and time.
</span></span></code></pre></div><ol start="4">
<li>Once verified, <strong>disable</strong> the extension:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gemini extensions disable google-workspace
</span></span></code></pre></div><p><strong>B. ToolsForMCPServer Extension</strong></p>
<ol>
<li>Install <a href="https://github.com/tanaikech/ToolsForMCPServer-extension">ToolsForMCPServer-extension</a>. Refer to the <a href="https://github.com/tanaikech/ToolsForMCPServer-extension?tab=readme-ov-file#how-to-install-toolsformcpserver-extension">installation guide</a> for details.</li>
<li>Launch Gemini CLI and run the verification prompt:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>Get the current date and time.
</span></span></code></pre></div><ol start="3">
<li>Once verified, <strong>disable</strong> the extension:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gemini extensions disable tools-for-mcp-server-extension
</span></span></code></pre></div><h2 id="4-configuration">4. Configuration</h2>
<p>To aggregate these disabled extensions under Nexus-MCP, you must create a configuration file.</p>
<p><strong>Create mcp_config.json</strong></p>
<p>Identify the installation paths of your extensions using <code>gemini extensions list</code>. Typical paths are located in <code>/home/{username}/.gemini/extensions/...</code>.</p>
<p>Create the JSON file (e.g., in your home directory) with the following content. <strong>Replace <code>{username}</code> with your actual username.</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;mcpServers&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;google-workspace&#34;</span>: {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;command&#34;</span>: <span style="color:#e6db74">&#34;node&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;args&#34;</span>: [
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;/home/{username}/.gemini/extensions/google-workspace/dist/index.js&#34;</span>
</span></span><span style="display:flex;"><span>      ]
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;tools-for-mcp-server-extension&#34;</span>: {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;command&#34;</span>: <span style="color:#e6db74">&#34;node&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;args&#34;</span>: [
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;/home/{username}/.gemini/extensions/tools-for-mcp-server-extension/mcp-server/src/tools-for-mcp-server-extension.js&#34;</span>
</span></span><span style="display:flex;"><span>      ],
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;timeout&#34;</span>: <span style="color:#ae81ff">300000</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>Set Environment Variable</strong></p>
<p><strong>This environment variable is used for both Gemini CLI and Antigravity.</strong></p>
<p>Point Nexus-MCP to this configuration file. Replace <code>{your path}</code> with the full path to the file you just created.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>export MCP_SERVER_LIST<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{your path}/mcp_config.json&#34;</span>
</span></span></code></pre></div><p><strong>Verify Configuration</strong></p>
<p>Run <code>gemini extensions list</code>. You should see <code>nexus-mcp-extension</code> enabled, while the other two are disabled (marked with <code>✗</code>).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>$ gemini extensions list
</span></span><span style="display:flex;"><span>✗ google-workspace (v0.0.3)
</span></span><span style="display:flex;"><span> ...
</span></span><span style="display:flex;"><span> Enabled (User): false
</span></span><span style="display:flex;"><span> ...
</span></span><span style="display:flex;"><span>✓ nexus-mcp-extension (0.0.1)
</span></span><span style="display:flex;"><span> ...
</span></span><span style="display:flex;"><span> Enabled (User): true
</span></span><span style="display:flex;"><span> ...
</span></span><span style="display:flex;"><span>✗ tools-for-mcp-server-extension (1.2.0)
</span></span><span style="display:flex;"><span> ...
</span></span><span style="display:flex;"><span> Enabled (User): false
</span></span><span style="display:flex;"><span> ...
</span></span></code></pre></div><h1 id="validation-and-testing">Validation and Testing</h1>
<h2 id="part-1-testing-with-gemini-cli">Part 1: Testing with Gemini CLI</h2>
<p>Launch the Gemini CLI. You can confirm the connection status by running the <code>/mcp</code> command.</p>
<p><img src="https://tanaikech.github.io/image-storage/20251225a/fig2a.jpg" alt=""></p>
<p>To verify which tools Nexus-MCP has aggregated, use the prompt: <code>run a tool get-server-information</code>.</p>
<p><img src="https://tanaikech.github.io/image-storage/20251225a/fig2b.jpg" alt=""></p>
<p>In this example, the system successfully identifies 46 tools from <code>google-workspace</code> and 160 tools from <code>tools-for-mcp-server-extension</code>. In this sample case, the total number of tools is 206.</p>
<p><strong>Case Study 1: Weather Information</strong></p>
<p>Prompt:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>What is the weather forecast for Tokyo at noon today?
</span></span></code></pre></div><p><img src="https://tanaikech.github.io/image-storage/20251225a/fig2c.jpg" alt=""></p>
<p>Result: The agent identifies and utilizes 2 specific tools from <code>tools-for-mcp-server-extension</code> to fulfill the request.</p>
<p><strong>Case Study 2: Calendar Management (Routing Control)</strong></p>
<p>Since Google Calendar functionality exists in both extensions, you can direct the agent to use a specific backend by specifying the server name.</p>
<p>Option A: Using Google Workspace</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>Show me today&#39;s schedule. Use google-workspace.
</span></span></code></pre></div><p><img src="https://tanaikech.github.io/image-storage/20251225a/fig2d.jpg" alt=""></p>
<p>Option B: Using ToolsForMCPServer</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>Show me today&#39;s schedule. Use tools-for-mcp-server-extension.
</span></span></code></pre></div><p><img src="https://tanaikech.github.io/image-storage/20251225a/fig2e.jpg" alt=""></p>
<p><strong>Case Study 3: Complex Multi-Tool Workflows</strong></p>
<p>Nexus-MCP truly shines when handling complex instructions that require tools from multiple sources.</p>
<p>Prompt:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>Write a comprehensive article about developing Google Apps Script (GAS) using generative AI. The article should include an introductory overview, formatted lists for best practices, and a table comparing different AI-assisted coding techniques. Once generated, please create a new Google Document, insert the content, and provide the shareable URL.
</span></span></code></pre></div><p><img src="https://tanaikech.github.io/image-storage/20251225a/fig2f.jpg" alt=""></p>
<p>Result: The agent coordinated 3 different tools across both aggregated servers to generate the content and create the document.</p>
<p><img src="https://tanaikech.github.io/image-storage/20251225a/fig2g.jpg" alt=""></p>
<h2 id="part-2-testing-with-google-antigravity">Part 2: Testing with Google Antigravity</h2>
<p>Nexus-MCP can also be integrated into Google Antigravity for advanced agentic workflows. In this article, the MCP servers installed as the Gemini CLI Extensions are used.</p>
<p><strong>1. Set Rules</strong></p>
<p>Launch Antigravity. Click the three dots (top right) and select <strong>Customizations</strong>. In the <strong>Rules</strong> section, paste the content of the <code>GEMINI.md</code> file included with the extension. This step is crucial as it loads the system instructions that enforce the 4-Phase Algorithm (Discovery, Mapping, Schema, Execution).</p>
<p>Command to read the file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cat /home/<span style="color:#f92672">{</span>username<span style="color:#f92672">}</span>/.gemini/extensions/nexus-mcp-extension/GEMINI.md
</span></span></code></pre></div><p><strong>2. Configure MCP Server</strong></p>
<p>Click the three dots (top right) &gt; <strong>MCP servers</strong> &gt; <strong>Manage MCP servers</strong>. Select <strong>View raw config</strong>. Paste the following configuration (replace <code>{username}</code> with yours):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;mcpServers&#34;</span>: {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;nexus-mcp&#34;</span>: {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;command&#34;</span>: <span style="color:#e6db74">&#34;node&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;args&#34;</span>: [
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;/home/{username}/.gemini/extensions/nexus-mcp-extension/mcp-server/src/nexus-mcp.js&#34;</span>
</span></span><span style="display:flex;"><span>      ]
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Click <strong>Refresh</strong>. You should see the connected Nexus-MCP server.</p>
<p><img src="https://tanaikech.github.io/image-storage/20251225a/fig3a.jpg" alt=""></p>
<p><strong>Case Study 1: Weather Information</strong></p>
<p>Prompt:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>What is the weather forecast for Tokyo at noon today?
</span></span></code></pre></div><p><img src="https://tanaikech.github.io/image-storage/20251225a/fig3b.jpg" alt=""></p>
<p>Walkthrough: The agent correctly identifies the weather tool and processes the request.</p>
<p><img src="https://tanaikech.github.io/image-storage/20251225a/fig3c.jpg" alt=""></p>
<p><strong>Case Study 2: Complex Workflow</strong></p>
<p>Scenario: A multi-step task involving content generation, document creation, PDF conversion, and email delivery.</p>
<p>Prompt:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>Write a comprehensive article about developing Google Apps Script (GAS) using generative AI. The article should include an introductory overview, formatted lists for best practices, and a table comparing different AI-assisted coding techniques. Once generated, please create a new Google Document, insert the content, convert the Google Document to a PDF file, and send an email to `tanaike@hotmail.com` including the shareable URL of the PDF file by giving a suitable title and email body.
</span></span></code></pre></div><p><img src="https://tanaikech.github.io/image-storage/20251225a/fig3d.jpg" alt=""></p>
<p><strong>Implementation Plan:</strong> Antigravity analyzes the request and builds a step-by-step plan based on the keyword mapping rules (finding tools for PDF conversion and email).</p>
<p><img src="https://tanaikech.github.io/image-storage/20251225a/fig3e.jpg" alt=""></p>
<p><strong>Walkthrough:</strong> The agent executes the plan sequentially.</p>
<p><img src="https://tanaikech.github.io/image-storage/20251225a/fig3f.jpg" alt=""></p>
<p><strong>Outcome:</strong> The email was successfully received with the correct metadata and attachment link.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># Title
</span></span><span style="display:flex;"><span>Comprehensive Article: Developing GAS with Generative AI
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span># Body
</span></span><span style="display:flex;"><span>Hello,
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>I have completed the article on developing Google Apps Script (GAS)
</span></span><span style="display:flex;"><span>using Generative AI.
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><p>The generated PDF confirms the content integrity.</p>
<p><img src="https://tanaikech.github.io/image-storage/20251225a/fig3g.jpg" alt=""></p>
<h1 id="important">IMPORTANT</h1>
<p>Performance can vary between model versions (e.g., gemini-3-pro vs. gemini-3-flash). In testing, the Gemini CLI occasionally reached the goal more reliably than Antigravity depending on the specific model used. If you encounter issues where the agent fails to reach the goal in Antigravity, try updating the system instruction (Rules) or refining the prompt to align more closely with the strategic keyword mapping defined in the system architecture.</p>
<h1 id="summary">Summary</h1>
<p>Nexus-MCP represents a significant advancement in managing large-scale tool ecosystems for LLMs. By abstracting the complexity of multiple servers behind a single gateway, it ensures that agents remain accurate and efficient even as their capabilities grow.</p>
<ul>
<li><strong>Solves Tool Space Interference (TSI):</strong> Effectively prevents context window saturation and reduces model confusion by dynamically filtering irrelevant tool definitions.</li>
<li><strong>Unified Gateway Architecture:</strong> Simplifies client configuration by aggregating multiple disparate MCP servers into a single access point.</li>
<li><strong>Defensive &amp; Deterministic Logic:</strong> Employs a mandatory 4-phase algorithm (Discovery, Mapping, Schema, Execution) to enforce strict literal matching and eliminate tool hallucinations.</li>
<li><strong>Cross-Platform Integration:</strong> Provides seamless compatibility with major agentic platforms like Gemini CLI and Google Antigravity.</li>
<li><strong>Complex Workflow Orchestration:</strong> Enables the coordination of sophisticated multi-step tasks (e.g., Doc -&gt; PDF -&gt; Email) across different providers with high reliability.</li>
</ul>
<h1 id="references">References</h1>
<ol>
<li><strong>Tool Space Interference Research:</strong> <a href="https://www.microsoft.com/en-us/research/blog/tool-space-interference-in-the-mcp-era-designing-for-agent-compatibility-at-scale/">Microsoft Research Blog</a></li>
<li><strong>Nexus-MCP Extension:</strong> <a href="https://github.com/tanaikech/nexus-mcp-extension">GitHub Repository</a></li>
<li><strong>ToolsForMCPServer Extension:</strong> <a href="https://github.com/tanaikech/ToolsForMCPServer-extension">GitHub Repository</a></li>
<li><strong>Google Workspace Extension:</strong> <a href="https://github.com/gemini-cli-extensions/workspace">GitHub Repository</a></li>
<li><strong>Gemini CLI:</strong> <a href="https://github.com/google-gemini/gemini-cli">Official Documentation</a></li>
<li><strong>Google Antigravity:</strong> <a href="https://antigravity.google/">Official Site</a></li>
</ol>

  
  <h4><i class="fas fa-share-alt" aria-hidden="true"></i>&nbsp;Share!</h4>
<ul class="share-buttons">
	<li><a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2ftanaikech.github.io%2f2025%2f12%2f25%2fnexus-mcp-a-unified-gateway-for-scalable-and-deterministic-mcp-server-aggregation%2f" target="_blank" title="Share on Facebook"><i class="fab fa-facebook" aria-hidden="true"></i><span class="sr-only">Share on Facebook</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="https://twitter.com/intent/tweet?source=https%3a%2f%2ftanaikech.github.io%2f2025%2f12%2f25%2fnexus-mcp-a-unified-gateway-for-scalable-and-deterministic-mcp-server-aggregation%2f" target="_blank" title="Tweet"><i class="fab fa-twitter" aria-hidden="true"></i><span class="sr-only">Tweet</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="https://plus.google.com/share?url=https%3a%2f%2ftanaikech.github.io%2f2025%2f12%2f25%2fnexus-mcp-a-unified-gateway-for-scalable-and-deterministic-mcp-server-aggregation%2f" target="_blank" title="Share on Google+"><i class="fab fa-google-plus" aria-hidden="true"></i><span class="sr-only">Share on Google+</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="http://www.tumblr.com/share?v=3&u=https%3a%2f%2ftanaikech.github.io%2f2025%2f12%2f25%2fnexus-mcp-a-unified-gateway-for-scalable-and-deterministic-mcp-server-aggregation%2f" target="_blank" title="Post to Tumblr"><i class="fab fa-tumblr" aria-hidden="true"></i><span class="sr-only">Post to Tumblr</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="http://pinterest.com/pin/create/button/?url=https%3a%2f%2ftanaikech.github.io%2f2025%2f12%2f25%2fnexus-mcp-a-unified-gateway-for-scalable-and-deterministic-mcp-server-aggregation%2f" target="_blank" title="Pin it"><i class="fab fa-pinterest-p" aria-hidden="true"></i><span class="sr-only">Pin it</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="http://www.reddit.com/submit?url=https%3a%2f%2ftanaikech.github.io%2f2025%2f12%2f25%2fnexus-mcp-a-unified-gateway-for-scalable-and-deterministic-mcp-server-aggregation%2f" target="_blank" title="Submit to Reddit"><i class="fab fa-reddit-alien" aria-hidden="true"></i><span class="sr-only">Submit to Reddit</span></a>
	</li>
</ul>


<style>
	ul.share-buttons{
	  list-style: none;
	  padding: 0;
	}

	ul.share-buttons li{
	  display: inline;
	}

	ul.share-buttons .sr-only{
	  position: absolute;
	  clip: rect(1px 1px 1px 1px);
	  clip: rect(1px, 1px, 1px, 1px);
	  padding: 0;
	  border: 0;
	  height: 1px;
	  width: 1px;
	  overflow: hidden;
	}
</style>


  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="https://tanaikech.github.io/2025/12/12/updated-gas-library-utlapp/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="https://tanaikech.github.io/2025/12/12/updated-gas-library-utlapp/">Updated: GAS Library - UtlApp</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
    <nav class="next">
      <a href="https://tanaikech.github.io/2026/01/01/overcoming-tool-space-interference-bridging-google-adk-and-a2a-sdk-via-google-apps-script/">Overcoming Tool Space Interference: Bridging Google ADK and A2A SDK via Google Apps Script</a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="https://tanaikech.github.io/2026/01/01/overcoming-tool-space-interference-bridging-google-adk-and-a2a-sdk-via-google-apps-script/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>


  
  
  
  

  

</div>

</div>
</div>
<script src="https://tanaikech.github.io/js/ui.js"></script>
<script src="https://tanaikech.github.io/js/menus.js"></script>






<script async src="https://www.googletagmanager.com/gtag/js?id=G-J3Z6T50WL5"></script>
<script>
  
  if (window.location.hostname != "localhost") {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-J3Z6T50WL5');
  }
</script>






<script src="https://tanaikech.github.io/js/math-code.js"></script>
  <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
  


</body>
</html>

