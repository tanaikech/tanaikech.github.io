<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  
  <meta name="google-site-verification" content="1BvDMY90ui0jRLHkrpqdQ_x62h5VNEMuK6mQsDvVQH0" />

  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.98.0" />

  <title>Overcoming Tool Space Interference: Bridging Google ADK and A2A SDK via Google Apps Script &middot; tanaike</title>

    

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://tanaikech.github.io/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://tanaikech.github.io/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="https://tanaikech.github.io/css/blackburn.css">

  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.6.0/css/all.css">

  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet" type="text/css">

  
  <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

 
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/styles/androidstudio.min.css">
  <script async src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/highlight.min.js"></script>
  
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="https://tanaikech.github.io/img/favicon.ico" type="image/x-icon" />

  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  
  <a class="pure-menu-heading brand" href="https://tanaikech.github.io/">TANAIKE</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/about/"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/topics/"><i class='fa fa-folder fa-fw'></i>Topics</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/tags/"><i class='fa fa-tags fa-fw'></i>Tags</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/contact/"><i class='fa fa-phone fa-fw'></i>Contact</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/link/"><i class='fa fa-thumbs-up fa-fw'></i>Links</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/webapps/"><i class='fas fa-toolbox'></i>Web Applications</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/donate/"><i class='fas fa-donate'></i>Donate</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/tanaikech" rel="me" target="_blank"><i class="fa-brands fa-square-x-twitter"></i>X</a>
    </li>
    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://medium.com/@tanaike" rel="me" target="_blank"><i class="fa-brands fa-medium"></i>Medium</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://linkedin.com/in/tanaike" rel="me" target="_blank"><i class="fab fa-linkedin fa-fw"></i>LinkedIn</a>
    </li>
    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/tanaikech" rel="me" target="_blank"><i class="fa-brands fa-github"></i>GitHub</a>
    </li>
    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://gist.github.com/tanaikech" rel="me" target="_blank"><i class="fas fa-code fa-fw"></i>Gists</a>
    </li>
    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://stackoverflow.com/users/7108653" rel="me" target="_blank"><i class="fab fa-stack-overflow fa-fw"></i>Stack Overflow</a>
    </li>
    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://dev.to/tanaike" rel="me" target="_blank"><i class="fa-brands fa-dev fa-fw"></i>DEV</a>
    </li>
    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://zenn.dev/tanaike" rel="me" target="_blank"><i class="fas fa-edit fa-fw"></i>Zenn</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://devpost.com/tanaike" rel="me" target="_blank"><i class="fas fa-code fa-fw"></i>Devpost</a>
    </li>
    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2017. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>Overcoming Tool Space Interference: Bridging Google ADK and A2A SDK via Google Apps Script</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>01 Jan 2026, 16:37</time>
  </div>

  

  
  
  
  <div>
    <i class="fa fa-folder fa-fw"></i>
    
      <a class="post-taxonomy-topic" href="https://tanaikech.github.io/topics/gastips">GasTips</a>&nbsp;&#47;
    
      <a class="post-taxonomy-topic" href="https://tanaikech.github.io/topics/nodetips">NodeTips</a>
    
  </div>
  
  

  
  
  
  <div>
    <i class="fa fa-tags fa-fw"></i>
    
      <a class="post-taxonomy-tag" href="https://tanaikech.github.io/tags/google-apps-script">Google Apps Script</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://tanaikech.github.io/tags/gemini">Gemini</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://tanaikech.github.io/tags/node.js">Node.js</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://tanaikech.github.io/tags/a2a">A2A</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://tanaikech.github.io/tags/agent2agent">agent2agent</a>
    
  </div>
  
  

</div>

  <p><a href="https://gist.github.com/tanaikech/37e4c20b090ad607d87f359b7ae72092">Gists</a></p>
<p><img src="https://tanaikech.github.io/image-storage/20260101a/fig1.jpg" alt=""></p>
<h1 id="abstract">Abstract</h1>
<p>This article introduces a Google Apps Script-based Agent2Agent architecture to solve Tool Space Interference. While the provided demonstration utilizes a single server for testing purposes, the architecture is designed for distributed task execution. By running multiple category-specific A2A servers in parallel, users can achieve scalable, high-efficiency agent networks.</p>
<h1 id="introduction">Introduction</h1>
<p>As the Model Context Protocol (MCP) standardizes LLM connectivity, the Agent2Agent (A2A) paradigm is becoming essential for executing complex, multi-step tasks. However, integrating a high volume of tools often triggers &ldquo;Tool Space Interference (TSI)&quot;—a phenomenon where verbose metadata saturates context windows and degrades reasoning accuracy. <a href="https://medium.com/google-cloud/nexus-mcp-a-unified-gateway-for-scalable-and-deterministic-mcp-server-aggregation-3211f0adc603">Ref</a> <a href="https://www.microsoft.com/en-us/research/blog/tool-space-interference-in-the-mcp-era-designing-for-agent-compatibility-at-scale/">Ref</a> Current industry guidelines suggest a &ldquo;soft limit&rdquo; of 20 functions per agent; exceeding this threshold frequently results in hallucinations and logic failures.</p>
<p>To mitigate TSI, I previously proposed <strong>Nexus-MCP</strong>. <a href="https://medium.com/google-cloud/nexus-mcp-a-unified-gateway-for-scalable-and-deterministic-mcp-server-aggregation-3211f0adc603">Ref</a> Nexus-MCP functions as a centralized gateway employing a deterministic four-phase workflow to map and filter tools. While effective, Nexus-MCP relies on a single AI agent acting as the client. This centralized nature makes it less suitable for true distributed task execution, where distinct categories of tools should ideally be handled by specialized agents.</p>
<p>In this article, I propose that complex tasks are executed more efficiently by dividing multiple tools into distinct A2A servers. While Nexus-MCP aggregates tools into one gateway, the A2A architecture allows us to group tools by category (e.g., an &ldquo;Office Suite Server,&rdquo; a &ldquo;Data Analysis Server&rdquo;) and execute tasks in a distributed manner.</p>
<p>This article also serves as an implementation test of an A2A server built with Google Apps Script (GAS). Consequently, the demonstration below uses a <strong>single A2A server</strong> to validate the core technology. However, in practice, loading multiple A2A servers and using them in parallel according to the task will lead to significantly more efficient processing.</p>
<h1 id="the-strategic-value-of-google-apps-script">The Strategic Value of Google Apps Script</h1>
<p>GAS serves as an ideal foundation for A2A servers because its low-code environment is easily navigable by both human developers and generative AI. Furthermore, GAS is accessible to anyone with a Google account and offers native affinity with Google Workspace. It simplifies complex operations by facilitating seamless OAuth scope authentication and providing direct access to Google APIs via Advanced Google Services.</p>
<p>By utilizing GAS, developers can rapidly deploy lightweight, category-specific agents that communicate via the A2A protocol, forming a robust mesh of capabilities without the infrastructure overhead of traditional server environments.</p>
<h1 id="the-technical-challenge-bridging-a2a-and-gas">The Technical Challenge: Bridging A2A and GAS</h1>
<p>Despite these advantages, a significant technical hurdle persists: standard A2A clients cannot natively interact with GAS-based servers due to GAS&rsquo;s dynamic deployment URLs and specific OAuth2 requirements. These characteristics conflict with the A2A discovery protocol, which expects a static <code>/.well-known/agent-card.json</code> endpoint. Furthermore, the official <code>@a2a-js/sdk</code> typically requires modification to handle Google’s specific redirection and authentication logic.</p>
<p>This article introduces a lightweight proxy designed to resolve these path and authentication conflicts. I also present an &ldquo;all-in-one&rdquo; GAS server architecture that ensures full compatibility with official A2A and MCP specifications without requiring SDK modifications.</p>
<h1 id="repository">Repository</h1>
<p><a href="https://github.com/tanaikech/a2a-for-google-apps-script">https://github.com/tanaikech/a2a-for-google-apps-script</a></p>
<h1 id="architecture-and-workflow">Architecture and Workflow</h1>
<p>The core innovation here is the shift from a &ldquo;Unified Gateway&rdquo; to a &ldquo;Distributed Capability&rdquo; model.</p>
<ul>
<li><strong>Nexus-MCP Approach:</strong> A single AI Agent connects to one Gateway. The Gateway holds all tools and filters them.</li>
<li><strong>A2A Approach (Ideal State):</strong> A primary AI Agent connects to multiple specialized Agents (Servers) running in parallel.</li>
<li><strong>A2A Approach (This Test):</strong> To verify the GAS implementation, I use a single A2A server containing the filtering logic.</li>
</ul>
<p><img src="https://tanaikech.github.io/image-storage/20260101a/fig2b.jpg" alt=""></p>
<p><a href="https://mermaidchart.com/play?utm_source=mermaid_live_editor&amp;utm_medium=share#pako:eNp9VWlv2zgQ_SsDFV20QBz4kh3rwy4UO1kESLtGnRboykHBSCNbCEUKJOXaNfLfl4cu18nagM1j3puZN-Tw6MU8QS_wNoIUW3hYrBnoz_v3sNwSidAP4GavUDBC4Y7pAYlVxhn8AQukuCFm4iBfJYoPkfmFpeB5oR4_Qq_3J4QbZCoK79wggFBTHX6htHRMPTq03Wztb-fRbcmcqzmhFBSHcBjCCsUOhcY4lCyfXNx674fb-3HPN1kMUWsdwAORz_CPiLcolbAhwy4j8Bn3pex9mi-rGE4SHwSwyGTMNcGh3a6Cs4HeZ1I9cE5lZCOketpTZm7JmSXP46JD3iAs_o7tNBkXh2gukCgE3Gtx22XgaZUBEJaAAQIjOcom_ZOAhwEsKWEsY5t2tyWz0jrpo-q_qpNl18OCa5YlUabaEkJd4utO7DXG8HxDkaWHm71O57jgLijIiYq3HYc2G3r466XlaEcdBs0In7lTJNcxyOyJYvQFVSkY3AjB6wK2u68LMApgpUucE_hGaJZ0juYrHr-jK8JKn-JYhZH7r9OHsJN5ZWLN_0blfLiab1D1MlaUqiftai_lwp2BDr7BOO1cbOiWtHw6kGpblkXBhQK1RVA6YyNdJ4ETYEe11c9MK19FfryTTRLXQHYko0Qr1q3Cif25FteRMzBXrmE6k-P6VI7_YT-r7avFG5s-g3H5W9HOcq5jNfKbGxHpA8efEWI9t8q_eflqhINvMX5elXGMUh4bx1CtpCU91b5r_pbyb1vXMYeULjjDYygQzOmRCgsJsb6DFBUmpy4r4463OoFXbRpdOJPciRZ1xnCbmQ7-BWVJ65aLLKkdNmXwA5hTLnUPsafwnvPCWXS5mi7tLmmn1YKwK7JyZLv2pm3y7Rn4naPzCFQ33xjYoDVVoZ3jh-YNgULwXZbojJusrIVxZ96fx4-dvFbqQJuWKPUEzx-LNKM0eJfOzPdCPxH6QAXvRqNRNe79zBK1DYbF_oTFhuKgOEj9FBtof-BPZ09dY_ssVm7SdBaPG9v0Ke4PE-9CP8BZ4gVKlHjh5ShyYqbe0bCsPV2MHNdeoIcJEc9rb81eNKYg7F_O8xomeLnZekFKqNSzsjDVWmREP5F5syp02VHMecmUF4wGlsMLjt7eCwZX48vRcDqdjEdTfzKaaQG8gxeMh5f-2J9NBlfDad-f-aOXC--X9dq_nA37_avxYDoZTa4mA99_-Q9r96lY">Mermaid Chart Playground</a></p>
<p>In this demonstration, I utilize the <strong>Nexus-MCP logic</strong> within a single A2A server to manage a library of 160+ tools. The workflow is as follows:</p>
<ol>
<li>The user provides an input prompt to the AI agent.</li>
<li>The AI agent parses the prompt and calls the A2A server functions.</li>
<li>The A2A server processes the prompt tasks. The server dynamically selects and &ldquo;installs&rdquo; only the specific tool required for the current task from the tool library.</li>
<li>The A2A server returns the final result to the client.</li>
</ol>
<p><strong>Scalability Note:</strong> While this sample packs 160 tools into one server, the actual strategic advantage of A2A is that you can split these into, for example, 10 servers with 16 tools each. The client can then load these servers in parallel, routing tasks to the appropriate specialist without any single context window becoming overwhelmed.</p>
<h1 id="usage">Usage</h1>
<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li>Node.js is installed on your local machine.</li>
<li>A valid Gemini API Key. <a href="https://ai.google.dev/gemini-api/docs/api-key">Get one here</a>.</li>
</ul>
<h2 id="1-server-side-setup">1. Server-Side Setup</h2>
<h3 id="11-copy-the-demo-script">1.1 Copy the Demo Script</h3>
<p>Use the following GAS code to copy the A2A server template to your Google Drive:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">myFunction</span>() {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">fileId</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;1mylSOTzCuui95Amk-kRufA9ffMqcnjqk8HSaoatoxaSPwkv-hg1q7uRC&#34;</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">file</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">DriveApp</span>.<span style="color:#a6e22e">getFileById</span>(<span style="color:#a6e22e">fileId</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">file</span>.<span style="color:#a6e22e">makeCopy</span>(<span style="color:#a6e22e">file</span>.<span style="color:#a6e22e">getName</span>());
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Run the function <code>myFunction</code>. By this, the sample A2A server is copied to the root folder on your Google Drive.</p>
<p>Alternatively, visit the <a href="https://github.com/tanaikech/a2a-for-google-apps-script">GitHub Repository</a> to manually copy the scripts. In this sample, <a href="https://github.com/tanaikech/a2a-for-google-apps-script/blob/master/a2a-server/sample2/a2a-server.js">a2a-server/sample2/a2a-server.js</a> is used. This sample server uses the 160 tools of <a href="https://github.com/tanaikech/ToolsForMCPServer">ToolsForMCPServer</a>.</p>
<p>In this repository, one more sample server is prepared. It can be seen at <a href="https://github.com/tanaikech/a2a-for-google-apps-script/blob/master/a2a-server/sample1/a2a-server.js">a2a-server/sample1/a2a-server.js</a>. This sample server can use the custom tools.</p>
<p><strong>Important Note on TSI:</strong> To demonstrate TSI mitigation, this sample includes 160 tools (from <a href="https://github.com/tanaikech/ToolsForMCPServer">ToolsForMCPServer</a>). Like Nexus-MCP, the server dynamically filters these tools based on the prompt task, ensuring the LLM context never exceeds the safety threshold regardless of the total tool count.</p>
<h3 id="12-deploy-as-web-app">1.2 Deploy as Web App</h3>
<ol>
<li>Open the script editor in your copied project.</li>
<li>Click <strong>Deploy</strong> &gt; <strong>New deployment</strong>.</li>
<li>Select <strong>Web App</strong> as the type.</li>
<li>Set &ldquo;Execute as&rdquo; to <strong>Me</strong>.</li>
<li>Set &ldquo;Who has access&rdquo; to <strong>Anyone</strong>.</li>
<li>Click <strong>Deploy</strong> and copy the Web App URL (<code>https://script.google.com/macros/s/###/exec</code>).</li>
</ol>
<p><em>Note: For updates, you must deploy a new version to reflect code changes. <a href="https://gist.github.com/tanaikech/ebf92d8f427d02d53989d6c3464a9c43">Reference</a>.</em></p>
<p><strong>When this Web Apps is used for only the A2A server, the value except for <code>Anyone</code> can also be used for <code>Who has access to the app</code>, because the A2A client requests this A2A server with the access token.</strong></p>
<h3 id="13-configure-the-script">1.3 Configure the Script</h3>
<p>In your GAS project, locate the following script variables:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">object</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">apiKey</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;{apiKey}&#34;</span>, <span style="color:#75715e">// Your API key for using Gemini API.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">model</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;models/gemini-3-flash-preview&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">accessKey</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;sample&#34;</span>, <span style="color:#75715e">// If you want to use an access key for requesting Web Apps, please use this.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">webAppsUrl</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;https://script.google.com/macros/s/###/exec&#34;</span>, <span style="color:#75715e">// Your deployed Web Apps URL.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// logSpreadsheetId: &#34;{spreadsheetId}&#34;, // If you use this, the logs are stored to Google Spreadsheet.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>};
</span></span></code></pre></div><ul>
<li>Set your Gemini API key in the <code>apiKey</code> variable in <code>object</code>.</li>
<li>Set your access key in the <code>accessKey</code> in <code>object</code>. The default is <code>sample</code>.</li>
<li>Set your Web App URL in the <code>webAppsUrl</code> variable in <code>object</code>.</li>
</ul>
<p><strong>After updating the script, you must deploy the Web App again to reflect the latest changes.</strong></p>
<h2 id="2-client-side-setup">2. Client-Side Setup</h2>
<h3 id="21-clone-repository-and-install-dependencies">2.1 Clone Repository and Install Dependencies</h3>
<p>Execute the following commands in your terminal:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git clone https://github.com/tanaikech/a2a-for-google-apps-script
</span></span><span style="display:flex;"><span>cd a2a-for-google-apps-script/a2a-client
</span></span><span style="display:flex;"><span>npm install
</span></span></code></pre></div><p>When you see the directory <code>a2a-for-google-apps-script</code>, you can see the following 2 directories:</p>
<ul>
<li><code>a2a-client</code>: Sample client scripts for Node.js.</li>
<li><code>a2a-server</code>: Sample A2A servers for Google Apps Script Web Apps.</li>
</ul>
<h3 id="22-the-proxy-script">2.2 The Proxy Script</h3>
<p>The current <code>@a2a-js/sdk</code> version automatically strips query parameters and redirects to a <code>/.well-known/</code> path. The provided <a href="https://github.com/tanaikech/a2a-for-google-apps-script/blob/master/a2a-client/clientGas.js"><code>clientGas.js</code></a> resolves this by intercepting the fetch API, allowing the SDK to communicate with GAS&rsquo;s dynamic URLs.</p>
<p><strong>Authentication:</strong> This script uses the Google Cloud SDK (<code>gcloud CLI</code>) to retrieve access tokens. Ensure you have the <code>https://www.googleapis.com/auth/drive.readonly</code> or <code>https://www.googleapis.com/auth/drive</code> scope authorized. The scope is used for accessing GAS Web Apps with the path <code>/.well-known/agent-card.json</code>.</p>
<h3 id="23-set-environment-variables">2.3 Set Environment Variables</h3>
<p>Create a <code>.env</code> file in the <code>a2a-client</code> directory with the following content:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>GEMINI_API_KEY=&#34;YOUR_KEY&#34;
</span></span><span style="display:flex;"><span>GEMINI_MODEL=&#34;gemini-3-flash-preview&#34;
</span></span><span style="display:flex;"><span>A2A_WEB_APPS_URL=&#34;https://script.google.com/macros/s/###/exec?accessKey=sample&#34;
</span></span></code></pre></div><p>In this case, when you use the access key, <code>A2A_WEB_APPS_URL</code> is required to include it as the query parameter (e.g., <code>accessKey=sample</code>).</p>
<p>In this sample, as a simple sample, only one A2A server is used. So, <code>A2A_WEB_APPS_URL</code> is used. When you want to use multiple A2A servers, please add more variables for A2A servers and add functions using <code>new FunctionTool</code> in the A2A client script.</p>
<h1 id="testing">Testing</h1>
<h2 id="terminal-test">Terminal Test</h2>
<p>Run the sample script to verify basic connectivity:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npm run test1
</span></span></code></pre></div><p>Expected output:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>Prompt: How much is 10 yen in USD?
</span></span><span style="display:flex;"><span>Response: 10 yen is approximately **0.0641 USD**...
</span></span><span style="display:flex;"><span>Prompt: What is the weather forecast for Tokyo?
</span></span><span style="display:flex;"><span>Response: The weather forecast for Tokyo... is clear sky.
</span></span></code></pre></div><h2 id="browseradk-test">Browser/ADK Test</h2>
<p>This test uses the Agent Development Kit (ADK) to provide a chat interface:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npm run test2
</span></span></code></pre></div><p>Open <code>http://localhost:8000</code> to interact with the agent.</p>
<p><strong>Example 1: Simple prompt</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>I want to cook miso soup.
</span></span><span style="display:flex;"><span>To achieve this goal, create a new Google Spreadsheet,
</span></span><span style="display:flex;"><span>generate a roadmap for cooking miso soup in the spreadsheet,
</span></span><span style="display:flex;"><span>and return the Spreadsheet URL.
</span></span></code></pre></div><p>The actual situation on the browser is as follows. You can confirm that the prompt is correctly processed through the A2A server.</p>
<p><img src="https://tanaikech.github.io/image-storage/20260101a/fig3a.gif" alt=""></p>
<p>The created roadmap is as follows.</p>
<p><img src="https://tanaikech.github.io/image-storage/20260101a/fig3b.jpg" alt=""></p>
<p><strong>Example 2: Complex prompt</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>Write a comprehensive article about developing Google Apps Script (GAS) using generative AI.
</span></span><span style="display:flex;"><span>The article should include an introductory overview, formatted lists for best practices,
</span></span><span style="display:flex;"><span>and a table comparing different AI-assisted coding techniques.
</span></span><span style="display:flex;"><span>Once generated, please create a new Google Document, insert the content, convert the Google Document to a PDF file,
</span></span><span style="display:flex;"><span>and send an email to `tanaike@hotmail.com` including the shareable URL of the PDF file by giving a suitable title and email body.
</span></span></code></pre></div><p>The actual situation on the browser is as follows. You can confirm that the prompt is correctly processed through the A2A server.</p>
<p><img src="https://tanaikech.github.io/image-storage/20260101a/fig4a.gif" alt=""></p>
<p>This requires multiple tools (Docs API, Drive API, Gmail API). In a standard environment, this might trigger TSI. However, using the Nexus-MCP-style deterministic selection, the GAS A2A server handles this seamlessly.</p>
<p>The created PDF is as follows.</p>
<p><img src="https://tanaikech.github.io/image-storage/20260101a/fig4b.jpg" alt=""></p>
<p>And, the following email was correctly sent.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>Dear Tanaike,
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Please find attached the PDF document containing the comprehensive article on &#34;Leveraging Generative AI for Google Apps Script Development&#34;. The shareable URL for the PDF is https://drive.google.com/file/d/###/view?usp=sharing.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Best regards,
</span></span><span style="display:flex;"><span>Your AI Assistant
</span></span></code></pre></div><h1 id="summary">Summary</h1>
<ul>
<li><strong>Parallel Execution for Efficiency:</strong> While this test utilized a single server, the architecture&rsquo;s true strength lies in deploying multiple A2A servers in parallel, allowing tasks to be processed simultaneously by specialized agents rather than a single bottleneck.</li>
<li><strong>Distributed Architecture vs. Centralized Bottleneck:</strong> Moving beyond the Nexus-MCP single-agent model, A2A facilitates a distributed network where tools are grouped by category (e.g., Office, Data, Email) into separate servers.</li>
<li><strong>Mitigation of Tool Space Interference (TSI):</strong> By utilizing category-specific A2A servers, the context window remains uncluttered, preventing LLM confusion even when hundreds of tools are available.</li>
<li><strong>Google Apps Script as an Agent Platform:</strong> GAS provides a low-code, accessible, and authenticated environment for deploying agents that natively integrate with Google Workspace.</li>
<li><strong>Bridging Technical Gaps:</strong> The introduction of a custom proxy solves the incompatibility between standard A2A SDKs and GAS&rsquo;s dynamic URLs, enabling standard clients to discover and utilize GAS-based agents seamlessly.</li>
</ul>

  
  <h4><i class="fas fa-share-alt" aria-hidden="true"></i>&nbsp;Share!</h4>
<ul class="share-buttons">
	<li><a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2ftanaikech.github.io%2f2026%2f01%2f01%2fovercoming-tool-space-interference-bridging-google-adk-and-a2a-sdk-via-google-apps-script%2f" target="_blank" title="Share on Facebook"><i class="fab fa-facebook" aria-hidden="true"></i><span class="sr-only">Share on Facebook</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="https://twitter.com/intent/tweet?source=https%3a%2f%2ftanaikech.github.io%2f2026%2f01%2f01%2fovercoming-tool-space-interference-bridging-google-adk-and-a2a-sdk-via-google-apps-script%2f" target="_blank" title="Tweet"><i class="fab fa-twitter" aria-hidden="true"></i><span class="sr-only">Tweet</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="https://plus.google.com/share?url=https%3a%2f%2ftanaikech.github.io%2f2026%2f01%2f01%2fovercoming-tool-space-interference-bridging-google-adk-and-a2a-sdk-via-google-apps-script%2f" target="_blank" title="Share on Google+"><i class="fab fa-google-plus" aria-hidden="true"></i><span class="sr-only">Share on Google+</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="http://www.tumblr.com/share?v=3&u=https%3a%2f%2ftanaikech.github.io%2f2026%2f01%2f01%2fovercoming-tool-space-interference-bridging-google-adk-and-a2a-sdk-via-google-apps-script%2f" target="_blank" title="Post to Tumblr"><i class="fab fa-tumblr" aria-hidden="true"></i><span class="sr-only">Post to Tumblr</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="http://pinterest.com/pin/create/button/?url=https%3a%2f%2ftanaikech.github.io%2f2026%2f01%2f01%2fovercoming-tool-space-interference-bridging-google-adk-and-a2a-sdk-via-google-apps-script%2f" target="_blank" title="Pin it"><i class="fab fa-pinterest-p" aria-hidden="true"></i><span class="sr-only">Pin it</span></a>
	</li>&nbsp;&nbsp;&nbsp;
	<li><a href="http://www.reddit.com/submit?url=https%3a%2f%2ftanaikech.github.io%2f2026%2f01%2f01%2fovercoming-tool-space-interference-bridging-google-adk-and-a2a-sdk-via-google-apps-script%2f" target="_blank" title="Submit to Reddit"><i class="fab fa-reddit-alien" aria-hidden="true"></i><span class="sr-only">Submit to Reddit</span></a>
	</li>
</ul>


<style>
	ul.share-buttons{
	  list-style: none;
	  padding: 0;
	}

	ul.share-buttons li{
	  display: inline;
	}

	ul.share-buttons .sr-only{
	  position: absolute;
	  clip: rect(1px 1px 1px 1px);
	  clip: rect(1px, 1px, 1px, 1px);
	  padding: 0;
	  border: 0;
	  height: 1px;
	  width: 1px;
	  overflow: hidden;
	}
</style>


  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="https://tanaikech.github.io/2025/12/25/nexus-mcp-a-unified-gateway-for-scalable-and-deterministic-mcp-server-aggregation/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="https://tanaikech.github.io/2025/12/25/nexus-mcp-a-unified-gateway-for-scalable-and-deterministic-mcp-server-aggregation/">Nexus-MCP: A Unified Gateway for Scalable and Deterministic MCP Server Aggregation</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
    <nav class="next">
      <a href="https://tanaikech.github.io/2026/01/02/statistics-of-my-activities-from-2025-01-01-2025-12-31-on-stackoverflow/">Statistics of my Activities from 2025-01-01 - 2025-12-31 on Stackoverflow</a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="https://tanaikech.github.io/2026/01/02/statistics-of-my-activities-from-2025-01-01-2025-12-31-on-stackoverflow/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>


  
  
  
  

  

</div>

</div>
</div>
<script src="https://tanaikech.github.io/js/ui.js"></script>
<script src="https://tanaikech.github.io/js/menus.js"></script>






<script async src="https://www.googletagmanager.com/gtag/js?id=G-J3Z6T50WL5"></script>
<script>
  
  if (window.location.hostname != "localhost") {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-J3Z6T50WL5');
  }
</script>








</body>
</html>

