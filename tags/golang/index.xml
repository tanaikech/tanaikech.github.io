<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Golang on tanaike</title>
    <link>https://tanaikech.github.io/tags/golang/</link>
    <description>Recent content in Golang on tanaike</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>ja</language>
    <copyright>&amp;copy; 2016. All rights reserved.</copyright>
    <lastBuildDate>Tue, 13 Jun 2017 10:28:25 +0900</lastBuildDate>
    <atom:link href="https://tanaikech.github.io/tags/golang/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Updated: CLI Tool - goris</title>
      <link>https://tanaikech.github.io/2017/06/13/updated-cli-tool---goris</link>
      <pubDate>Tue, 13 Jun 2017 10:28:25 +0900</pubDate>
      
      <guid>https://tanaikech.github.io/2017/06/13/updated-cli-tool---goris</guid>
      <description>&lt;p&gt;goris is a CLI tool to search for images with Google Reverse Image Search.&lt;/p&gt;

&lt;p&gt;Today, it was updated to v1.1.0. Please check it out. &lt;a href=&#34;https://github.com/tanaikech/goris&#34;&gt;https://github.com/tanaikech/goris&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;When images are matched to a searched image, web pages with matching images are retrieved. These are web pages displayed on Google top page. When this is not used, images are retrieved. This was added as a boolean option. (This was added by a request.)&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Slice Created by Split at Golang</title>
      <link>https://tanaikech.github.io/2017/06/09/slice-created-by-split-at-golang</link>
      <pubDate>Fri, 09 Jun 2017 09:16:56 +0900</pubDate>
      
      <guid>https://tanaikech.github.io/2017/06/09/slice-created-by-split-at-golang</guid>
      <description>

&lt;p&gt;When a string without no strings is split by &lt;code&gt;strings.Split()&lt;/code&gt;, the created slice is the same to the slice created by &lt;code&gt;make()&lt;/code&gt;. The length of the slice doesn&amp;rsquo;t become zero.&lt;/p&gt;

&lt;h2 id=&#34;sample-script&#34;&gt;Sample script :&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;package main

import (
    &amp;quot;fmt&amp;quot;
    &amp;quot;strings&amp;quot;
)

func main() {
    sample1a := strings.Split(&amp;quot;&amp;quot;, &amp;quot; &amp;quot;)
    fmt.Printf(&amp;quot;%v, %v, &#39;%v&#39;, %v, %+q\n&amp;quot;, sample1a, len(sample1a), sample1a[0], len(sample1a[0]), sample1a[0])

    sample1b := make([]string, 1)
    fmt.Printf(&amp;quot;%v, %v, &#39;%v&#39;, %v, %+q\n&amp;quot;, sample1b, len(sample1b), sample1b[0], len(sample1b[0]), sample1b[0])

    var sample2a []string
    fmt.Printf(&amp;quot;%v, %v\n&amp;quot;, sample2a, len(sample2a))

    sample2b := []string{}
    fmt.Printf(&amp;quot;%v, %v\n&amp;quot;, sample2b, len(sample2b))
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;result&#34;&gt;Result :&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;strings.Split() : [], 1, &#39;&#39;, 0, &amp;quot;&amp;quot;
make()          : [], 1, &#39;&#39;, 0, &amp;quot;&amp;quot;
var                : [], 0
[]string{}      : [], 0
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>Changing from &#39;float64&#39; to &#39;int&#39; for Values did Unmarshal using &#39;map[string]interface{}&#39;</title>
      <link>https://tanaikech.github.io/2017/06/02/changing-from-float64-to-int-for-values-did-unmarshal-using-mapstringinterface</link>
      <pubDate>Fri, 02 Jun 2017 17:22:13 +0900</pubDate>
      
      <guid>https://tanaikech.github.io/2017/06/02/changing-from-float64-to-int-for-values-did-unmarshal-using-mapstringinterface</guid>
      <description>&lt;p&gt;This sample is for changing from &amp;ldquo;float64&amp;rdquo; to &amp;ldquo;int&amp;rdquo; for values did unmarshal using &lt;code&gt;map[string]interface{}&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;When it did unmarshal using map[string]interface{}, a number with &amp;ldquo;int&amp;rdquo; was changed to &amp;ldquo;float64&amp;rdquo;. And it shows an error as follows.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Error :&lt;/strong&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;panic: interface conversion: interface {} is float64, not int
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;Sample Script :&lt;/strong&gt;
It solves using following script.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;package main

import (
    &amp;quot;encoding/json&amp;quot;
    &amp;quot;fmt&amp;quot;
    &amp;quot;reflect&amp;quot;
)

func main() {
    data := `{&amp;quot;key&amp;quot;: 10}`
    var i map[string]interface{}
    json.Unmarshal([]byte(data), &amp;amp;i)

    val1 := i[&amp;quot;key&amp;quot;]
    fmt.Printf(&amp;quot;%v, %v\n&amp;quot;, val1, reflect.TypeOf(val1)) // 10, float64

    i[&amp;quot;key&amp;quot;] = int(i[&amp;quot;key&amp;quot;].(float64))
    val2 := i[&amp;quot;key&amp;quot;]
    fmt.Printf(&amp;quot;%v, %v\n&amp;quot;, val2, reflect.TypeOf(val2)) // 10, int
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;a href=&#34;https://play.golang.org/p/kHroZ1rHVQ&#34;&gt;Go Playground&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Replacing JSON Key by Golang</title>
      <link>https://tanaikech.github.io/2017/06/02/replacing-json-key-by-golang</link>
      <pubDate>Fri, 02 Jun 2017 11:56:30 +0900</pubDate>
      
      <guid>https://tanaikech.github.io/2017/06/02/replacing-json-key-by-golang</guid>
      <description>&lt;p&gt;This sample is for replacing JSON key by golang.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;package main

import (
    &amp;quot;encoding/json&amp;quot;
    &amp;quot;fmt&amp;quot;
)

func main() {
    json1 := `{&amp;quot;key1&amp;quot;: &amp;quot;value1&amp;quot;}`

    obj := map[string]interface{}{}
    json.Unmarshal([]byte(json1), &amp;amp;obj)

    fmt.Println(obj) // &amp;lt;-- map[key1:value1]

    obj[&amp;quot;key2&amp;quot;] = obj[&amp;quot;key1&amp;quot;]
    delete(obj, &amp;quot;key1&amp;quot;)

    fmt.Println(obj) // &amp;lt;-- map[key2:value1]
}
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>Benchmark: Splitting Command-Line Arguments by Golang</title>
      <link>https://tanaikech.github.io/2017/06/02/benchmark-splitting-command-line-arguments-by-golang</link>
      <pubDate>Fri, 02 Jun 2017 10:59:31 +0900</pubDate>
      
      <guid>https://tanaikech.github.io/2017/06/02/benchmark-splitting-command-line-arguments-by-golang</guid>
      <description>

&lt;p&gt;This sample script is for splitting command-line arguments by golang. There are 2 types. One is the regular expression is used. Another is that &lt;code&gt;Split()&lt;/code&gt; and &lt;code&gt;TrimSpace()&lt;/code&gt; are used.&lt;/p&gt;

&lt;p&gt;Here, each process speed was compared.&lt;/p&gt;

&lt;h2 id=&#34;script&#34;&gt;Script :&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;package main

import (
    &amp;quot;regexp&amp;quot;
    &amp;quot;strings&amp;quot;
    &amp;quot;testing&amp;quot;
)

func BenchmarkB1(b *testing.B) {
    str := &amp;quot;test1.txt, test2.txt&amp;quot;
    b.ResetTimer()
    for i := 0; i &amp;lt; b.N; i++ {
        ar := regexp.MustCompile(`\s*,\s*`).Split(str, -1)
        var result []string
        for _, x := range ar {
            result = append(result, x) // --&amp;gt; &#39;test.js&#39;, &#39;test2.py&#39;
        }
        _ = result
    }
}

func BenchmarkB2(b *testing.B) {
    str := &amp;quot;test1.txt, test2.txt&amp;quot;
    b.ResetTimer()
    for i := 0; i &amp;lt; b.N; i++ {
        ar := strings.Split(str, &amp;quot;,&amp;quot;)
        var result []string
        for _, x := range ar {
            result = append(result, strings.TrimSpace(x)) // --&amp;gt; &#39;test.js&#39;, &#39;test2.py&#39;
        }
        _ = result
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;result&#34;&gt;Result :&lt;/h2&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;$ go test -bench .
BenchmarkB1-4             100000             13048 ns/op
BenchmarkB2-4            3000000               399 ns/op
PASS
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Just as expected, the regular expression was slow. And it&amp;rsquo;s much slower than that of &lt;code&gt;Split()&lt;/code&gt; and &lt;code&gt;TrimSpace()&lt;/code&gt;.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Updated ggsrun to v121</title>
      <link>https://tanaikech.github.io/2017/05/28/updated-ggsrun-to-v121</link>
      <pubDate>Sun, 28 May 2017 14:20:08 +0900</pubDate>
      
      <guid>https://tanaikech.github.io/2017/05/28/updated-ggsrun-to-v121</guid>
      <description>

&lt;h1 id=&#34;ggsrun-was-updated-to-v-1-2-1&#34;&gt;ggsrun was updated to v.1.2.1&lt;/h1&gt;

&lt;ol&gt;
&lt;li&gt;Configuration file (&lt;code&gt;ggsrun.cfg&lt;/code&gt;) became to be able to be read using the environment variable.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;You can check this at &lt;a href=&#34;https://github.com/tanaikech/ggsrun&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Decoding JSON by Golang</title>
      <link>https://tanaikech.github.io/2017/05/21/decoding-json-by-golang</link>
      <pubDate>Sun, 21 May 2017 11:55:34 +0900</pubDate>
      
      <guid>https://tanaikech.github.io/2017/05/21/decoding-json-by-golang</guid>
      <description>&lt;p&gt;Decoding JSON by Golang&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;func main() {
    data := `{
      &amp;quot;A_key1&amp;quot;: {
        &amp;quot;B_key1&amp;quot;: {
          &amp;quot;C_key&amp;quot;: &amp;quot;value&amp;quot;
        }
      },
      &amp;quot;A_key2&amp;quot;: {
        &amp;quot;B_key2&amp;quot;: {
          &amp;quot;C_key&amp;quot;: &amp;quot;value&amp;quot;
        }
      },
      &amp;quot;A_key3&amp;quot;: {
        &amp;quot;B_key3&amp;quot;: {
          &amp;quot;C_key&amp;quot;: &amp;quot;value&amp;quot;
        }
      },
      &amp;quot;A_key4&amp;quot;: {
        &amp;quot;B_key4&amp;quot;: {
          &amp;quot;C_key&amp;quot;: &amp;quot;value&amp;quot;
        }
      },
      &amp;quot;A_key5&amp;quot;: {
        &amp;quot;B_key5&amp;quot;: {
          &amp;quot;C_key&amp;quot;: &amp;quot;value&amp;quot;
        }
      }
    }`
    var p interface{}
    json.NewDecoder(strings.NewReader(data)).Decode(&amp;amp;p)
    fmt.Println(p)
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;a href=&#34;https://play.golang.org/p/A86B8YHd5m&#34;&gt;Go Playground&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Dynamically Creating JSON by Golang</title>
      <link>https://tanaikech.github.io/2017/05/21/dynamically-creating-json-by-golang</link>
      <pubDate>Sun, 21 May 2017 10:55:35 +0900</pubDate>
      
      <guid>https://tanaikech.github.io/2017/05/21/dynamically-creating-json-by-golang</guid>
      <description>&lt;p&gt;Dynamically Creating JSON by Golang&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;obj := map[string]interface{}{}
obj[&amp;quot;hoge&amp;quot;] = &amp;quot;huga&amp;quot;
fmt.Println(obj)
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;a href=&#34;https://play.golang.org/p/7mLXgwddWO&#34;&gt;Go Playground&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Retrieving Response Headers by Golang</title>
      <link>https://tanaikech.github.io/2017/05/21/retrieving-response-headers-by-golang</link>
      <pubDate>Sun, 21 May 2017 10:43:32 +0900</pubDate>
      
      <guid>https://tanaikech.github.io/2017/05/21/retrieving-response-headers-by-golang</guid>
      <description>&lt;p&gt;Retrieving Response Headers by Golang&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;res, _ := client.Do(req)
contentType := res.Header.Get(&amp;quot;Content-Type&amp;quot;)
contentLength := res.Header.Get(&amp;quot;Content-Length&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>Updated ggsrun to v120</title>
      <link>https://tanaikech.github.io/2017/05/19/updated-ggsrun-to-v120</link>
      <pubDate>Fri, 19 May 2017 08:49:06 +0900</pubDate>
      
      <guid>https://tanaikech.github.io/2017/05/19/updated-ggsrun-to-v120</guid>
      <description>

&lt;h1 id=&#34;ggsrun-was-updated-to-v-1-2-0&#34;&gt;ggsrun was updated to v.1.2.0&lt;/h1&gt;

&lt;ol&gt;
&lt;li&gt;Added a command for retrieving revision files on Google Drive.&lt;/li&gt;
&lt;li&gt;Some modifications.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;You can check this at &lt;a href=&#34;https://github.com/tanaikech/ggsrun&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Updated: CLI Tool - goris</title>
      <link>https://tanaikech.github.io/2017/05/16/updated-cli-tool---goris</link>
      <pubDate>Tue, 16 May 2017 12:56:16 +0900</pubDate>
      
      <guid>https://tanaikech.github.io/2017/05/16/updated-cli-tool---goris</guid>
      <description>&lt;p&gt;goris is a CLI tool to search for images with Google Reverse Image Search.&lt;/p&gt;

&lt;p&gt;Today, it was updated to v1.0.1. Please check it out. &lt;a href=&#34;https://github.com/tanaikech/goris&#34;&gt;https://github.com/tanaikech/goris&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;When number of retrieved URLs is smaller than number of default output, an error had occurred. This was fixed.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Dynamical Nested JSON Objects by Golang</title>
      <link>https://tanaikech.github.io/2017/05/09/dynamical-nested-json-objects-by-golang</link>
      <pubDate>Tue, 09 May 2017 15:58:08 +0900</pubDate>
      
      <guid>https://tanaikech.github.io/2017/05/09/dynamical-nested-json-objects-by-golang</guid>
      <description>

&lt;p&gt;This sample script dynamically creates nested JSON objects.&lt;/p&gt;

&lt;h3 id=&#34;script&#34;&gt;Script&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;obj := map[string]interface{}{}
for i := 1; i &amp;lt;= 5; i++ {
    value := map[string]interface{}{
        fmt.Sprintf(&amp;quot;B_key%d&amp;quot;, i): map[string]interface{}{
            &amp;quot;C_key&amp;quot;: &amp;quot;value&amp;quot;,
        },
    }
    obj[fmt.Sprintf(&amp;quot;A_key%d&amp;quot;, i)] = value
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;result&#34;&gt;Result&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-json&#34;&gt;{
  &amp;quot;A_key1&amp;quot;: {
    &amp;quot;B_key1&amp;quot;: {
      &amp;quot;C_key&amp;quot;: &amp;quot;value&amp;quot;
    }
  },
  &amp;quot;A_key2&amp;quot;: {
    &amp;quot;B_key2&amp;quot;: {
      &amp;quot;C_key&amp;quot;: &amp;quot;value&amp;quot;
    }
  },
  &amp;quot;A_key3&amp;quot;: {
    &amp;quot;B_key3&amp;quot;: {
      &amp;quot;C_key&amp;quot;: &amp;quot;value&amp;quot;
    }
  },
  &amp;quot;A_key4&amp;quot;: {
    &amp;quot;B_key4&amp;quot;: {
      &amp;quot;C_key&amp;quot;: &amp;quot;value&amp;quot;
    }
  },
  &amp;quot;A_key5&amp;quot;: {
    &amp;quot;B_key5&amp;quot;: {
      &amp;quot;C_key&amp;quot;: &amp;quot;value&amp;quot;
    }
  }
}
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>Updated: CLI Tool - gogauth</title>
      <link>https://tanaikech.github.io/2017/05/09/updated-cli-tool---gogauth</link>
      <pubDate>Tue, 09 May 2017 09:00:04 +0900</pubDate>
      
      <guid>https://tanaikech.github.io/2017/05/09/updated-cli-tool---gogauth</guid>
      <description>&lt;p&gt;gogauth is a CLI tool to easily retrieve access token for using APIs on Google.&lt;/p&gt;

&lt;p&gt;I thought that if the access token can easily retrieve, it may be useful for users who can use various convenience Google APIs. So I created this. Also this can be used for testing sample script like the demo. If this will be helpful for you, I&amp;rsquo;m glad.&lt;/p&gt;

&lt;p&gt;Today, it was updated to v2.0.1. Please check it out. &lt;a href=&#34;https://github.com/tanaikech/gogauth&#34;&gt;https://github.com/tanaikech/gogauth&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;https://tanaikech.github.io/img/batdemo.gif&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;This is a demo for retrieving values from spreadsheet using Google Sheet API v4. The access token obtained by gogauth is used for this. This is a batch file for windows command prompt.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Updated ggsrun to v110</title>
      <link>https://tanaikech.github.io/2017/04/30/updated-ggsrun-to-v110</link>
      <pubDate>Sun, 30 Apr 2017 11:49:35 +0900</pubDate>
      
      <guid>https://tanaikech.github.io/2017/04/30/updated-ggsrun-to-v110</guid>
      <description>

&lt;h2 id=&#34;updated-ggsrun-to-v-1-1-0&#34;&gt;Updated ggsrun to v.1.1.0&lt;/h2&gt;

&lt;p&gt;Added a command for updating existing project on Google Drive. One of scripts in the project can be also updated.&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/tanaikech/ggsrun&#34;&gt;https://github.com/tanaikech/ggsrun&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>CLI Tool - goris</title>
      <link>https://tanaikech.github.io/2017/04/26/cli-tool---goris</link>
      <pubDate>Wed, 26 Apr 2017 16:52:10 +0900</pubDate>
      
      <guid>https://tanaikech.github.io/2017/04/26/cli-tool---goris</guid>
      <description>

&lt;h3 id=&#34;overview&#34;&gt;Overview&lt;/h3&gt;

&lt;p&gt;This is a CLI tool to search for images with &lt;strong&gt;Go&lt;/strong&gt;ogle &lt;strong&gt;R&lt;/strong&gt;everse &lt;strong&gt;I&lt;/strong&gt;mage &lt;strong&gt;S&lt;/strong&gt;earch.&lt;/p&gt;

&lt;h3 id=&#34;motivation&#34;&gt;Motivation&lt;/h3&gt;

&lt;p&gt;Because I had wanted to search for images with an image URL and file on my terminal, I created this. This can download images from searched image URLs.&lt;/p&gt;

&lt;p&gt;&lt;font color=&#34;#3366CC&#34;&gt;&lt;strong&gt;The detail information and how to get this are &lt;a href=&#34;https://github.com/tanaikech/goris&#34;&gt;https://github.com/tanaikech/goris&lt;/a&gt;.&lt;/strong&gt;&lt;/font&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>