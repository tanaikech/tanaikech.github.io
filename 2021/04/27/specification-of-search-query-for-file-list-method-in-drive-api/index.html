<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.61.0" />

  <title>Specification of Search Query for File List Method in Drive API &middot; tanaike</title>

    

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://tanaikech.github.io/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://tanaikech.github.io/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="https://tanaikech.github.io/css/blackburn.css">

  
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.9.0/css/all.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

 
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/androidstudio.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="https://tanaikech.github.io/img/favicon.ico" type="image/x-icon" />

  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  
  <a class="pure-menu-heading brand" href="https://tanaikech.github.io/">TANAIKE</a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/about/"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/topics/"><i class='fa fa-folder fa-fw'></i>Topics</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/tags/"><i class='fa fa-tags fa-fw'></i>Tags</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/contact/"><i class='fa fa-phone fa-fw'></i>Contact</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/link/"><i class='fa fa-thumbs-up fa-fw'></i>Links</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/webapps/"><i class='fas fa-toolbox'></i>Web Applications</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://tanaikech.github.io/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/tanaikech" rel="me" target="_blank"><i class="fab fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://stackoverflow.com/users/7108653" rel="me" target="_blank"><i class="fab fa-stack-overflow fa-fw"></i>Stack Overflow</a>
    </li>
    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2017. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>Specification of Search Query for File List Method in Drive API</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>27 Apr 2021, 15:58</time>
  </div>

  

  
  
  
  <div>
    <i class="fa fa-folder fa-fw"></i>
    
      <a class="post-taxonomy-topic" href="https://tanaikech.github.io/topics/googleapitips">googleapitips</a>
    
  </div>
  
  

  
  
  
  <div>
    <i class="fa fa-tags fa-fw"></i>
    
      <a class="post-taxonomy-tag" href="https://tanaikech.github.io/tags/drive-api">drive-api</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="https://tanaikech.github.io/tags/search">search</a>
    
  </div>
  
  

</div>

  <p><a href="https://gist.github.com/tanaikech/268baf07f92f3b3962c86c6ea75b786a">Gists</a></p>
<p>In this report, I would like to report about the current specification of the search query for the file list method in Drive API.</p>
<p>Recently, I noticed that the specification of the search query for the file list method in Drive API might have been changed. I thought that to know the change of specification of the search query is important for creating the application using Drive API. In this report, I would like to introduce the current specification of the search query.</p>
<h2 id="experiments">Experiments</h2>
<p>I have done the following 5 experiments.</p>
<ol>
<li>Retrieving the file list by searching the filename.</li>
<li>Retrieving the file list by searching the mimeType.</li>
<li>Retrieving the file list by searching the parent folder ID.</li>
<li>Retrieving the file list by searching the trash box.</li>
<li>Retrieving the file list by searching the properties.</li>
</ol>
<p>As the operators for the search query, in the current stage (April 27, 2021), there are <code>contains, =, !=, &lt;=, &lt;, &gt;, &gt;=, in, has</code>. In this experiments, in order to retrieve the file list which has the inputted value, the operators of <code>contains, =, in, has</code> were used.</p>
<hr>
<h3 id="1-retrieving-the-file-list-by-searching-the-filename">1. Retrieving the file list by searching the filename.</h3>
<p>At the official document, when the file is searched by the filename, <code>name</code> and <code>contains, =, !=</code> are used. So in this case, the combination for checking this search query, I prepare the following 6 parts.</p>
<pre><code>&quot;name&quot;, &quot;contains&quot;, &quot;=&quot;, &quot;in&quot;, &quot;has&quot;, &quot;'###filename###'&quot;
</code></pre><p>When 3 parts like <code>name = 'filename'</code> for searching the files with the filename are retrieved from above 6 parts, 120 patterns can be considered. When these 120 patterns were checked for the method of file list of Drive API v3, it was found that in order to search the filename, the following search queries could be used. And, I could confirm that those search query returns the same results and those were the correct values. For other patterns, an error like <code>Invalid Value</code> occurred.</p>
<ol>
<li><code>name = 'sampleFilename'</code></li>
<li><code>name contains 'sampleFilename'</code></li>
<li><code>name in 'sampleFilename'</code></li>
</ol>
<p>The operators using at 1 and 2 can follow to the official document. But the operator using at 3 is not seen in the official document. It is considered that this is the hidden search query.</p>
<hr>
<h3 id="2-retrieving-the-file-list-by-searching-the-mimetype">2. Retrieving the file list by searching the mimeType.</h3>
<p>At the official document, when the file is searched by the mimeType, <code>mimeType</code> and <code>contains1, =, !=</code> are used. So in this case, the combination for checking this search query, I prepare the following 6 parts.</p>
<pre><code>&quot;mimeType&quot;, &quot;=&quot;, &quot;in&quot;, &quot;contains&quot;, &quot;has&quot;, &quot;'###mimeType###'&quot;
</code></pre><p>When 3 parts like <code>mimeType = 'mimeType'</code> for searching the files with the mimeType are retrieved from above 6 parts, 120 patterns can be considered. When these 120 patterns were checked for the method of file list of Drive API v3, it was found that in order to search the mimeType, the following search queries could be used. And, I could confirm that those search query returns the same results and those were the correct values. For other patterns, an error like <code>Invalid Value</code> occurred.</p>
<ol>
<li><code>mimeType = 'mimeType'</code></li>
<li><code>mimeType contains 'mimeType'</code></li>
<li><code>mimeType in 'mimeType'</code></li>
</ol>
<p>The operators using at 1 and 2 can follow to the official document. But the operator using at 3 is not seen in the official document. It is considered that this is the hidden search query.</p>
<hr>
<h3 id="3-retrieving-the-file-list-by-searching-the-parent-folder-id">3. Retrieving the file list by searching the parent folder ID.</h3>
<p>At the official document, when the file is searched by the parent folder ID, <code>parents</code> and <code>in</code> are used. So in this case, the combination for checking this search query, I prepare the following 6 parts.</p>
<pre><code>&quot;parents&quot;, &quot;=&quot;, &quot;in&quot;, &quot;contains&quot;, &quot;has&quot;, &quot;'###folderId###'&quot;
</code></pre><p>When 3 parts like <code>'###folderId###' in parents</code> for searching the files in the folder of folder ID are retrieved from above 6 parts, 120 patterns can be considered. When these 120 patterns were checked for the method of file list of Drive API v3, it was found that in order to search the file list in the folder, the following search queries could be used. And, I could confirm that those search query returns the same results and those were the correct values. For other patterns, an error like <code>Invalid Value</code> occurred.</p>
<ol>
<li><code>'###folderId###' in parents</code></li>
<li><code>parents = '###folderId###'</code></li>
<li><code>parents in '###folderId###'</code></li>
</ol>
<p>Pattern 1 can follow to the official document. But the patterns 2 and 3 are not seen in the official document. It is considered that these are the hidden search query.</p>
<hr>
<h3 id="4-retrieving-the-file-list-in-trash-box">4. Retrieving the file list in trash box.</h3>
<p>At the official document, when the file is searched by the parent folder ID, <code>trashed</code> and <code>in</code> are used. So in this case, the combination for checking this search query, I prepare the following 6 parts.</p>
<pre><code>&quot;trashed&quot;, &quot;=&quot;, &quot;in&quot;, &quot;contains&quot;, &quot;has&quot;, &quot;true&quot;
</code></pre><p>When 3 parts like <code>trashed = true</code> for searching the files in the trash box are retrieved from above 6 parts, 120 patterns can be considered. When these 120 patterns were checked for the method of file list of Drive API v3, it was found that in order to search the file list in the trash box, the following search queries could be used. And, I could confirm that those search query returns the same results and those were the correct values. For other patterns, an error like <code>Invalid Value</code> occurred.</p>
<ol>
<li><code>trashed = true</code></li>
<li><code>trashed in true</code></li>
</ol>
<p>Pattern 1 can follow to the official document. But the pattern 2 is not seen in the official document. It is considered that this is the hidden search query.</p>
<hr>
<h3 id="5-retrieving-the-file-list-by-searching-properties">5. Retrieving the file list by searching properties.</h3>
<p>At the official document, when the file is searched by the properties, <code>properties</code> and <code>has</code> are used. So in this case, the combination for checking this search query, I prepare the following 6 parts.</p>
<pre><code>&quot;properties&quot;, &quot;=&quot;, &quot;in&quot;, &quot;contains&quot;, &quot;has&quot;, &quot;{ key='key' and value='value' }&quot;
</code></pre><p>When 3 parts like <code>properties has { key='key' and value='value' }</code> for searching the files by the properties are retrieved from above 6 parts, 120 patterns can be considered. When these 120 patterns were checked for the method of file list of Drive API v3, it was found that in order to search the file list by the properties, the following search queries could be used. And, I could confirm that those search query returns the same results and those were the correct values. For other patterns, an error like <code>Invalid Value</code> occurred.</p>
<ol>
<li><code>properties has { key='key' and value='value' }</code></li>
</ol>
<p>In this case, only pattern 1 could work. This can follow to the official document.</p>
<h2 id="summary">Summary</h2>
<ul>
<li>From above results, it was found that the operators of <code>=</code> and <code>in</code> can be used as the same operator. But, it was also found that the operator of <code>has</code> can use for <code>properties</code> and <code>appProperties</code>.</li>
</ul>
<h2 id="references">References</h2>
<p>As the references, the official documents for the search query are as follows.</p>
<ul>
<li><a href="https://developers.google.com/drive/api/v3/search-files">Search for files and folders</a></li>
<li><a href="https://developers.google.com/drive/api/v3/ref-search-terms">Search query terms</a></li>
</ul>

  


  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="https://tanaikech.github.io/2021/04/19/creating-colorful-buttons-on-google-spreadsheet-using-google-apps-script/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="https://tanaikech.github.io/2021/04/19/creating-colorful-buttons-on-google-spreadsheet-using-google-apps-script/">Creating Colorful Buttons on Google Spreadsheet using Google Apps Script</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
  </div>
</div>



  

</div>

</div>
</div>
<script src="https://tanaikech.github.io/js/ui.js"></script>
<script src="https://tanaikech.github.io/js/menus.js"></script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
    }
  });
</script>


<script>
  
  if (window.location.hostname != "localhost") {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-84325623-1', 'auto');
    ga('send', 'pageview');
  }
</script>







</body>
</html>

